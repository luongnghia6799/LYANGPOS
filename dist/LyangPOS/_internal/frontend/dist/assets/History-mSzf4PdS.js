import{r as s,a1 as je,j as e}from"./vendor-C23Namvk.js";import{a as g}from"./vendor-utils-C44aPrMG.js";import{c as i,b as ye,d as j,P as Ne}from"./index-DXxzNUOO.js";import{D as ve}from"./settings-DRiS_Ul1.js";import{T as ke}from"./Toast-rpGoMLC9.js";import{C as we}from"./ConfirmModal-BTMhiinM.js";import{a as Ce,W as Se,c as Te,b as _e,$ as Pe,K as Ie,a5 as ze,X as oe,J as Me,a6 as De,_ as Ee,a7 as He,j as Oe,C as Ae}from"./vendor-icons-C8Df64wb.js";import{m as c,A as y}from"./vendor-framer-DVZK1f_z.js";function qe(){const[O,A]=s.useState([]),[de,G]=s.useState(!0),[o,L]=s.useState("Sale"),[N,ie]=s.useState(new Date().getFullYear()),[v,ce]=s.useState(new Date().getMonth()+1),[k,xe]=s.useState(new Date().getDate()),[Q,X]=s.useState(""),[B,K]=s.useState(""),[$,F]=s.useState(""),[Y,q]=s.useState(""),[w,U]=s.useState(""),[C,R]=s.useState(""),[S,J]=s.useState(""),[T,W]=s.useState(""),[_,V]=s.useState(""),[x,h]=s.useState(null),[Ge,Z]=s.useState(ve),[l,n]=s.useState(1),[u,ee]=s.useState(1),[te,ae]=s.useState(0),[m,pe]=s.useState(30),[P,he]=s.useState(1),se=je(),[I,z]=s.useState(null),[p,M]=s.useState(null),[b,me]=s.useState("date"),[f,re]=s.useState("desc"),ne=[];for(let t=2023;t<=new Date().getFullYear()+1;t++)ne.push(t);s.useEffect(()=>{le()},[l,o,N,v,k,m,w,C,S,T,b,f,_]),s.useEffect(()=>{ue()},[o]);const ue=async()=>{try{const a=(await g.get(`/api/print-templates?module=${o}`)).data;if(a&&a.length>0){const r=a.find(d=>d.is_default)||a[0];if(r)try{const d=JSON.parse(r.config);Z(ge=>({...ge,...d}))}catch(d){console.error(d)}}else{const r=await g.get("/api/settings");Object.keys(r.data).length>0&&Z(d=>({...d,...r.data}))}}catch(t){console.error(t)}},le=async()=>{G(!0);try{const t=await g.get("/api/orders",{params:{type:o,year:N,month:v,day:k,search_partner:w,search_id:C,minPrice:S,maxPrice:T,page:l,limit:m,sort_by:b,sort_order:f,payment_method:_||void 0}});t.data.items?(A(t.data.items),ee(t.data.pages),ae(t.data.total)):(A(t.data),ee(1),ae(t.data.length))}catch(t){console.error(t)}finally{G(!1)}};s.useEffect(()=>{const t=a=>{a.key==="Escape"&&h(null)};if(window.addEventListener("keydown",t),x){document.body.style.overflow="hidden";const a=document.getElementById("main-content");a&&(a.style.overflow="hidden")}else{document.body.style.overflow="";const a=document.getElementById("main-content");a&&(a.style.overflow="auto")}return()=>{window.removeEventListener("keydown",t),document.body.style.overflow="";const a=document.getElementById("main-content");a&&(a.style.overflow="auto")}},[x]);const D=t=>{b===t?re(f==="asc"?"desc":"asc"):(me(t),re("desc")),n(1)},E=({field:t})=>b!==t?e.jsx(He,{size:14,className:"ml-1 opacity-20"}):f==="asc"?e.jsx(Oe,{size:14,className:"ml-1 text-[#4a7c59]"}):e.jsx(Ae,{size:14,className:"ml-1 text-[#4a7c59]"}),H=()=>{U(Q),R(B),J($),W(Y),n(1)},be=()=>{X(""),K(""),F(""),q(""),U(""),R(""),J(""),W(""),V(""),n(1)},fe=t=>{M({title:"Xác nhận xóa",message:"Bạn có chắc chắn muốn XÓA đơn hàng này? Thao tác này sẽ cập nhật lại kho và công nợ.",onConfirm:async()=>{try{await g.delete(`/api/orders/${t}`),z({message:"Đã xóa đơn hàng thành công",type:"success"}),le()}catch(a){z({message:a.response?.data?.error||"Lỗi khi xóa đơn hàng",type:"error"})}M(null)},type:"danger"})};return e.jsxs("div",{className:"p-4 md:p-8 pb-20 w-full max-w-[98%] mx-auto transition-colors",children:[e.jsxs("div",{className:"no-print space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-8 px-4 md:px-0",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-black text-[#2d5016] dark:text-[#d4a574] uppercase tracking-tighter flex items-center gap-3",children:[e.jsx(Ce,{size:36,className:"text-[#4a7c59]"}),"Nhật Ký Vụ Mùa"]}),e.jsx("p",{className:"text-[#8b6f47] dark:text-[#d4a574]/60 font-medium tracking-tight",children:"Tra cứu lịch sử bán hàng và nhập hàng"})]}),e.jsxs("div",{className:"flex p-1.5 bg-gradient-to-r from-[#faf8f3] to-[#f5f1e8] dark:from-slate-900 dark:to-slate-800 rounded-2xl border-2 border-[#d4a574]/30 shadow-sm relative",children:[e.jsxs("button",{onClick:()=>{L("Sale"),n(1)},className:i("relative z-10 px-8 py-2.5 rounded-xl text-sm font-black uppercase transition-all flex items-center gap-2",o==="Sale"?"text-white":"text-[#8b6f47] hover:text-[#2d5016] dark:text-[#d4a574]/60 dark:hover:text-[#d4a574]"),children:[e.jsx(Se,{size:18})," BÁN HÀNG",o==="Sale"&&e.jsx(c.div,{layoutId:"activeTabIndicator",className:"absolute inset-0 bg-gradient-to-r from-[#2d5016] to-[#4a7c59] rounded-xl -z-10 shadow-lg shadow-[#2d5016]/20",transition:{type:"spring",bounce:.2,duration:.6}})]}),e.jsxs("button",{onClick:()=>{L("Purchase"),n(1)},className:i("relative z-10 px-8 py-2.5 rounded-xl text-sm font-black uppercase transition-all flex items-center gap-2",o==="Purchase"?"text-white":"text-[#8b6f47] hover:text-[#2d5016] dark:text-[#d4a574]/60 dark:hover:text-[#d4a574]"),children:[e.jsx(Te,{size:18})," NHẬP HÀNG",o==="Purchase"&&e.jsx(c.div,{layoutId:"activeTabIndicator",className:"absolute inset-0 bg-gradient-to-r from-[#2d5016] to-[#4a7c59] rounded-xl -z-10 shadow-lg shadow-[#2d5016]/20",transition:{type:"spring",bounce:.2,duration:.6}})]})]})]}),e.jsxs("div",{className:"border-2 border-[#d4a574]/30 bg-gradient-to-br from-[#faf8f3]/95 to-[#f5f1e8]/95 dark:from-slate-900/95 dark:to-slate-800/95 backdrop-blur-xl p-6 rounded-[2rem] space-y-6 shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.01] pointer-events-none",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 20px, rgba(139, 111, 71, 0.05) 20px, rgba(139, 111, 71, 0.05) 40px)",backgroundSize:"80px 80px"}}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 relative z-10",children:[e.jsxs("div",{className:"md:col-span-9 flex items-center gap-3 bg-white/80 dark:bg-slate-900/80 border-2 border-[#d4a574]/20 p-3 rounded-2xl transition-all hover:shadow-lg backdrop-blur-md",children:[e.jsx(_e,{size:20,className:"ml-2 text-[#4a7c59]"}),e.jsxs("select",{value:k,onChange:t=>{xe(t.target.value),n(1)},className:"bg-transparent border-none outline-none font-black text-sm text-[#2d5016] dark:text-white cursor-pointer hover:text-[#4a7c59] transition-colors uppercase",children:[e.jsx("option",{value:"",children:"Ngày: Tất cả"}),[...Array(31)].map((t,a)=>e.jsx("option",{value:a+1,children:a+1},a+1))]}),e.jsx("div",{className:"w-px h-6 bg-[#d4a574]/30 mx-1"}),e.jsxs("select",{value:v,onChange:t=>{ce(t.target.value),n(1)},className:"bg-transparent border-none outline-none font-black text-sm text-[#2d5016] dark:text-white cursor-pointer hover:text-[#4a7c59] transition-colors uppercase",children:[e.jsx("option",{value:"",children:"Tháng: Tất cả"}),[...Array(12)].map((t,a)=>e.jsx("option",{value:a+1,children:a+1},a+1))]}),e.jsx("div",{className:"w-px h-6 bg-[#d4a574]/30 mx-1"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs font-black text-[#8b6f47] uppercase",children:"Năm:"}),e.jsx("select",{value:N,onChange:t=>{ie(parseInt(t.target.value)),n(1)},className:"bg-transparent border-none outline-none font-black text-sm text-[#2d5016] dark:text-white cursor-pointer hover:text-[#4a7c59] transition-colors pr-4 uppercase",children:ne.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsx("div",{className:"md:col-span-3",children:e.jsxs("button",{onClick:H,className:"w-full h-full bg-gradient-to-r from-[#f4c430] to-[#d4a574] text-white p-3 rounded-2xl font-black uppercase text-xs hover:shadow-xl hover:shadow-[#f4c430]/30 transition-all flex items-center justify-center gap-2",children:[e.jsx(Pe,{size:18})," Lọc kết quả"]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-2 border-t-2 border-[#d4a574]/20 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-[#8b6f47]",children:"Số tiền ($):"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"number",placeholder:"Min",value:$,onChange:t=>F(t.target.value),className:"w-24 px-3 py-2 bg-white/80 dark:bg-slate-900/80 border-2 border-[#d4a574]/20 focus:border-[#2d5016] rounded-xl outline-none font-bold text-xs dark:text-white transition-all"}),e.jsx("span",{className:"text-[#d4a574]",children:"→"}),e.jsx("input",{type:"number",placeholder:"Max",value:Y,onChange:t=>q(t.target.value),className:"w-24 px-3 py-2 bg-white/80 dark:bg-slate-900/80 border-2 border-[#d4a574]/20 focus:border-[#2d5016] rounded-xl outline-none font-bold text-xs dark:text-white transition-all"})]})]}),e.jsxs("div",{className:"relative flex-1 min-w-[180px]",children:[e.jsx(Ie,{className:"absolute left-3 top-2.5 text-[#4a7c59]/50",size:16}),e.jsx("input",{type:"text",placeholder:"Tìm khách hàng...",value:Q,onChange:t=>X(t.target.value),onKeyDown:t=>t.key==="Enter"&&H(),className:"w-full pl-9 pr-4 py-2 bg-white/80 dark:bg-slate-900/80 border-2 border-[#d4a574]/20 focus:border-[#2d5016] rounded-xl focus:outline-none font-bold transition-all text-xs dark:text-white"})]}),e.jsxs("div",{className:"relative flex-1 min-w-[140px]",children:[e.jsx(ze,{className:"absolute left-3 top-2.5 text-[#4a7c59]/50",size:16}),e.jsx("input",{type:"text",placeholder:"Mã đơn...",value:B,onChange:t=>K(t.target.value),onKeyDown:t=>t.key==="Enter"&&H(),className:"w-full pl-9 pr-4 py-2 bg-white/80 dark:bg-slate-900/80 border-2 border-[#d4a574]/20 focus:border-[#2d5016] rounded-xl focus:outline-none font-bold transition-all text-xs dark:text-white"})]}),e.jsx("div",{className:"flex bg-[#2d5016]/10 dark:bg-[#4a7c59]/20 p-1.5 rounded-xl border border-[#d4a574]/30",children:["","Cash","Debt","Pending"].map(t=>e.jsx("button",{onClick:()=>{V(t),n(1)},className:i("px-3 py-1.5 rounded-lg text-[9px] font-black transition-all whitespace-nowrap",_===t?"bg-[#2d5016] text-white shadow-md scale-105":"text-[#8b6f47]/60 hover:text-[#2d5016] uppercase"),children:t===""?"TẤT CẢ":t==="Cash"?"TIỀN MẶT":t==="Pending"?"CHỜ T/T":"CÔNG NỢ"},t))}),(w||C||S||T)&&e.jsxs("button",{onClick:be,className:"px-3 py-2 text-rose-500 hover:text-rose-600 font-black text-[10px] uppercase transition-colors flex items-center gap-1 group",children:[e.jsx(oe,{size:14,className:"group-hover:rotate-90 transition-transform"}),e.jsx("span",{children:"Xóa lọc"})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-[#8b6f47]",children:"Dòng:"}),e.jsxs("select",{value:m,onChange:t=>{pe(parseInt(t.target.value)),n(1)},className:"bg-white/80 dark:bg-slate-950/80 border-2 border-[#d4a574]/30 rounded-xl px-3 py-1 text-[10px] font-black outline-none dark:text-white uppercase cursor-pointer hover:bg-[#d4a574]/10 transition-colors shadow-sm focus:ring-4 focus:ring-[#2d5016]/10",children:[e.jsx("option",{value:10,children:"10 dòng"}),e.jsx("option",{value:20,children:"20 dòng"}),e.jsx("option",{value:30,children:"30 dòng"}),e.jsx("option",{value:50,children:"50 dòng"}),e.jsx("option",{value:100,children:"100 dòng"})]})]})]})]}),e.jsx("div",{className:"border-2 border-[#d4a574]/30 bg-gradient-to-br from-[#faf8f3]/95 to-[#f5f1e8]/95 dark:from-slate-900/95 dark:to-slate-800/95 backdrop-blur-xl rounded-[2rem] shadow-xl overflow-hidden min-h-[400px]",children:e.jsx(y,{mode:"wait",children:de?e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-20 text-center flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-[#2d5016]/20 border-t-[#2d5016] rounded-full animate-spin"}),e.jsx("div",{className:"text-[#8b6f47] font-black uppercase text-xs tracking-[0.2em]",children:"Đang tải dữ liệu..."})]},"loading"):e.jsxs(c.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.3},className:"w-full",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#2d5016]/10 via-[#4a7c59]/8 to-[#2d5016]/10 border-b-2 border-[#d4a574]/40 transition-colors uppercase text-[10px] font-black tracking-widest text-[#2d5016] dark:text-[#d4a574]",children:e.jsxs("tr",{children:[e.jsx("th",{onClick:()=>D("display_id"),className:"p-4 cursor-pointer hover:text-[#4a7c59] transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-1",children:["MÃ ",e.jsx(E,{field:"display_id"})]})}),e.jsx("th",{onClick:()=>D("date"),className:"p-4 cursor-pointer hover:text-[#4a7c59] transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-1",children:["NGÀY GIỜ ",e.jsx(E,{field:"date"})]})}),e.jsx("th",{className:"p-4",children:"ĐỐI TÁC"}),e.jsx("th",{onClick:()=>D("total_amount"),className:"p-4 text-right cursor-pointer hover:text-[#4a7c59] transition-colors group",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:["TỔNG TIỀN ",e.jsx(E,{field:"total_amount"})]})}),e.jsx("th",{className:"p-4 text-right text-[#4a7c59]",children:"Số lượng"}),e.jsx("th",{className:"p-4 text-right text-rose-600 dark:text-rose-400",children:"PTTT"}),e.jsx("th",{className:"p-4 text-center",children:"THAO TÁC"})]})}),e.jsx("tbody",{className:"divide-y divide-[#d4a574]/10",children:e.jsx(y,{children:O.map((t,a)=>e.jsxs(c.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:a*.02,duration:.3},className:"hover:bg-[#d4a574]/5 dark:hover:bg-slate-800/50 group transition-colors",children:[e.jsxs("td",{className:"p-4 font-bold text-[#8b6f47]",children:["#",t.display_id||t.id]}),e.jsx("td",{className:"p-4 text-[#8b6f47] dark:text-gray-400 text-sm whitespace-nowrap",children:ye(t.date)}),e.jsx("td",{className:"p-4 font-black text-[#2d5016] dark:text-gray-100 uppercase text-xs tracking-tight",children:t.partner_name}),e.jsxs("td",{className:i("p-4 text-right font-black text-lg",t.total_amount<0?"text-amber-500":"text-[#2d5016] dark:text-[#4a7c59]"),children:[j(t.total_amount),t.total_amount<0&&e.jsx("div",{className:"text-[9px] uppercase font-black text-amber-500/60 mt-0.5 tracking-wider",children:"Khách trả hàng"})]}),e.jsxs("td",{className:"p-4 text-right text-[#8b6f47] font-bold text-xs",children:[t.details?.length||0," sản phẩm"]}),e.jsx("td",{className:"p-4 text-right",children:t.total_amount<0?e.jsx("span",{className:i("px-2 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest",t.payment_method==="Debt"?"bg-orange-100 text-orange-600":t.payment_method==="Cash"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-500"),children:t.payment_method==="Debt"?"TRỪ CÔNG NỢ":t.payment_method==="Cash"?"HOÀN TIỀN":"CHỜ XỬ LÝ"}):e.jsx("span",{className:i("px-2 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest",t.payment_method==="Cash"?"bg-[#2d5016]/10 text-[#2d5016]":t.payment_method==="Pending"?"bg-[#f4c430]/20 text-[#8b6f47]":t.amount_paid>=t.total_amount?"bg-blue-100 text-blue-600":"bg-rose-100 text-rose-600"),children:t.payment_method==="Cash"?"TIỀN MẶT":t.payment_method==="Pending"?"CHỜ T/T":t.amount_paid>=t.total_amount?"TẤT TOÁN":"CÔNG NỢ"})}),e.jsxs("td",{className:"p-4 text-right space-x-1 whitespace-nowrap",children:[e.jsx("button",{onClick:()=>h(t),className:"p-2 text-gray-400 hover:text-[#4a7c59] transition-colors",title:"Xem chi tiết",children:e.jsx(Me,{size:18})}),e.jsx("button",{onClick:()=>se(o==="Sale"?"/pos":"/purchase",{state:{editOrder:t}}),className:"p-2 text-[#f4c430] hover:bg-[#f4c430]/10 rounded-lg transition-colors",title:"Chỉnh sửa",children:e.jsx(De,{size:18})}),e.jsx("button",{onClick:()=>fe(t.id),className:"p-2 text-gray-300 hover:text-rose-500 transition-colors",title:"Xóa",children:e.jsx(Ee,{size:18})})]})]},t.id))})})]}),O.length===0&&e.jsx("div",{className:"p-20 text-center text-[#8b6f47] font-bold uppercase tracking-widest text-sm",children:"Không tìm thấy giao dịch nào."}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-[#faf8f3]/50 to-[#f5f1e8]/50 dark:bg-[#2d5016]/5 border-t-2 border-[#d4a574]/20 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-[10px] font-black text-[#8b6f47] uppercase tracking-widest",children:["Hiển thị ",e.jsxs("span",{className:"text-[#2d5016] dark:text-[#4a7c59]",children:[(l-1)*m+1," - ",Math.min(l*m,te)]})," trên tổng số ",e.jsx("span",{className:"text-[#2d5016] dark:text-[#4a7c59]",children:te})," đơn"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{disabled:l===1,onClick:()=>n(t=>Math.max(1,t-1)),className:"px-5 py-2.5 border-2 border-[#d4a574]/30 rounded-2xl text-[10px] font-black uppercase tracking-widest disabled:opacity-30 hover:bg-[#d4a574]/10 transition-all text-[#2d5016] dark:text-[#d4a574]",children:"Trước"}),[...Array(u)].map((t,a)=>{const r=a+1;return r===1||r===u||r>=l-2&&r<=l+2?e.jsx("button",{onClick:()=>n(r),className:i("w-10 h-10 rounded-2xl text-[10px] font-black transition-all",l===r?"bg-gradient-to-r from-[#2d5016] to-[#4a7c59] text-white shadow-lg shadow-[#2d5016]/30 border-0":"hover:bg-[#d4a574]/10 text-[#8b6f47] dark:text-[#d4a574]/60 border-2 border-[#d4a574]/30"),children:r},r):r===l-3||r===l+3?e.jsx("span",{className:"px-1 text-[#d4a574]",children:"..."},r):null}),e.jsx("button",{disabled:l===u,onClick:()=>n(t=>Math.min(u,t+1)),className:"px-5 py-2.5 border-2 border-[#d4a574]/30 rounded-2xl text-[10px] font-black uppercase tracking-widest disabled:opacity-30 hover:bg-[#d4a574]/10 transition-all text-[#2d5016] dark:text-[#d4a574]",children:"Sau"})]})]})]},o+l)})})]}),e.jsx(y,{children:x&&e.jsx(Ne,{children:e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4 no-print",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999},children:[e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>h(null),className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),e.jsxs(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative bg-white dark:bg-slate-800 w-full max-w-4xl max-h-[90vh] overflow-hidden rounded-[2.5rem] shadow-2xl border-2 border-[#d4a574]/30 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b-2 border-[#d4a574]/20 bg-gradient-to-r from-[#faf8f3] to-[#f5f1e8] dark:from-slate-800 dark:to-slate-700 transition-colors",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-xl font-black text-[#2d5016] dark:text-[#d4a574] uppercase tracking-tighter",children:"Chi tiết giao dịch"}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("span",{className:"text-[10px] font-black text-[#8b6f47] uppercase tracking-widest",children:"Phóng to:"}),e.jsx("input",{type:"range",min:"0.5",max:"1.5",step:"0.1",value:P,onChange:t=>he(parseFloat(t.target.value)),className:"w-32 h-1.5 bg-[#d4a574]/20 rounded-lg appearance-none cursor-pointer accent-[#2d5016]"}),e.jsxs("span",{className:"text-[10px] font-black text-[#4a7c59]",children:[Math.round(P*100),"%"]})]})]}),e.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-rose-50 dark:hover:bg-rose-900/20 text-gray-400 hover:text-rose-500 rounded-xl transition-all",children:e.jsx(oe,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-8 bg-gradient-to-br from-[#faf8f3]/50 to-[#f5f1e8]/50 dark:bg-slate-900 no-scrollbar transition-colors",children:e.jsx("div",{className:"flex justify-center transition-transform duration-300 origin-top",style:{transform:`scale(${P})`},children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl w-full max-w-2xl shadow-sm border-2 border-[#d4a574]/20",children:[e.jsx("h4",{className:"text-lg font-black uppercase mb-4 text-[#2d5016] dark:text-[#d4a574]",children:"Chi tiết sản phẩm"}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-[#d4a574]/30 text-left text-xs uppercase text-[#8b6f47]",children:[e.jsx("th",{className:"py-2",children:"Sản phẩm"}),e.jsx("th",{className:"py-2 text-right",children:"SL"}),e.jsx("th",{className:"py-2 text-right",children:"Giá"}),e.jsx("th",{className:"py-2 text-right",children:"T.Tiền"})]})}),e.jsx("tbody",{children:x.details.map((t,a)=>e.jsxs("tr",{className:"border-b border-[#d4a574]/10 text-sm",children:[e.jsx("td",{className:"py-2 font-bold text-[#2d5016] dark:text-white",children:t.product_name}),e.jsx("td",{className:"py-2 text-right text-[#8b6f47]",children:t.quantity}),e.jsx("td",{className:"py-2 text-right text-[#8b6f47]",children:j(t.price)}),e.jsx("td",{className:"py-2 text-right font-bold text-[#2d5016] dark:text-[#4a7c59]",children:j(t.quantity*t.price)})]},a))})]}),e.jsxs("div",{className:"mt-6 flex justify-between items-center pt-4 border-t-2 border-[#d4a574]/40",children:[e.jsx("span",{className:"font-black uppercase text-sm text-[#2d5016] dark:text-[#d4a574]",children:"Tổng cộng:"}),e.jsx("span",{className:"font-black text-2xl text-[#2d5016] dark:text-[#4a7c59]",children:j(x.total_amount)})]})]})})}),e.jsxs("div",{className:"p-6 border-t-2 border-[#d4a574]/20 bg-gradient-to-r from-[#faf8f3] to-[#f5f1e8] dark:from-slate-800 dark:to-slate-700 flex justify-end gap-3 transition-colors",children:[e.jsx("button",{onClick:()=>{se(o==="Sale"?"/pos":"/purchase",{state:{editOrder:x}})},className:"px-6 py-2.5 rounded-xl font-black text-[#f4c430] hover:bg-[#f4c430]/10 uppercase text-xs transition-all border-2 border-[#f4c430]/30",children:"CHỈNH SỬA"}),e.jsx("button",{onClick:()=>h(null),className:"px-6 py-2.5 rounded-xl font-black text-[#8b6f47] uppercase text-xs hover:bg-[#d4a574]/10 transition-all border-2 border-[#d4a574]/20",children:"Đóng"})]})]})]})})}),e.jsxs(y,{children:[I&&e.jsx(ke,{message:I.message,type:I.type,onClose:()=>z(null)}),p&&e.jsx(we,{isOpen:!!p,title:p.title,message:p.message,confirmText:"XÓA",cancelText:"HỦY",type:p.type,onConfirm:p.onConfirm,onCancel:()=>M(null)})]})]})}export{qe as default};
