import{r as c,j as e}from"./vendor-C23Namvk.js";import{a as p}from"./vendor-utils-C44aPrMG.js";import{T as b}from"./Toast-rpGoMLC9.js";import{P as g}from"./index-DXxzNUOO.js";import{A as x,m as u}from"./vendor-framer-DVZK1f_z.js";import{X as y,K as v,af as j,N as k,m as N}from"./vendor-icons-C8Df64wb.js";function S({partner:l,isOpen:i,onClose:o,onSave:h}){const n={name:"",is_customer:!0,is_supplier:!1,cccd:"",phone:"",address:"",debt_balance:0},[a,r]=c.useState(n),[d,m]=c.useState(null);c.useEffect(()=>{i&&r(l?t=>l.id&&t.id===l.id?t:{...n,...l}:n)},[i]),c.useEffect(()=>{const t=s=>{s.key==="Escape"&&i&&o()};if(window.addEventListener("keydown",t),i){document.body.style.overflow="hidden";const s=document.getElementById("main-content");s&&(s.style.overflow="hidden")}else{document.body.style.overflow="";const s=document.getElementById("main-content");s&&(s.style.overflow="auto")}return()=>{window.removeEventListener("keydown",t),document.body.style.overflow="";const s=document.getElementById("main-content");s&&(s.style.overflow="auto")}},[i,o]);const f=async t=>{t.preventDefault();try{l?.id?await p.put(`/api/partners/${l.id}`,a):await p.post("/api/partners",a),h(),o()}catch(s){console.error(s),m({message:s.response?.data?.error||"Lỗi khi lưu đối tác.",type:"error"})}};return e.jsx(g,{children:e.jsxs(x,{children:[i&&e.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center p-4 overflow-y-auto",children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:o}),e.jsxs(u.div,{initial:{opacity:0,scale:.9,y:20,rotateX:-10},animate:{opacity:1,scale:1,y:0,rotateX:0},exit:{opacity:0,scale:.95,y:10,filter:"blur(4px)"},transition:{type:"spring",damping:25,stiffness:200,mass:.8},className:"bg-white dark:bg-slate-900 rounded-[2.5rem] shadow-2xl w-full max-w-lg p-8 border dark:border-slate-800 transition-colors my-auto relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-800 dark:text-gray-100 uppercase tracking-tighter",children:l?.id?"Sửa thông tin đối tác":"Thêm đối tác mới"}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full transition-colors text-gray-400",children:e.jsx(y,{size:24})})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4 p-4 bg-emerald-50/50 dark:bg-emerald-950/20 rounded-2xl border border-emerald-100 dark:border-emerald-800/50",children:[e.jsxs("label",{className:"flex-1 flex items-center gap-2 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded-lg border-2 border-emerald-200 text-emerald-600 focus:ring-emerald-500",checked:a.is_customer,onChange:t=>r({...a,is_customer:t.target.checked})}),e.jsx("span",{className:"text-sm font-black uppercase text-emerald-700 dark:text-emerald-400 group-hover:text-emerald-600",children:"Khách Hàng"})]}),e.jsxs("label",{className:"flex-1 flex items-center gap-2 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded-lg border-2 border-emerald-200 text-emerald-600 focus:ring-emerald-500",checked:a.is_supplier,onChange:t=>r({...a,is_supplier:t.target.checked})}),e.jsx("span",{className:"text-sm font-black uppercase text-emerald-700 dark:text-emerald-400 group-hover:text-emerald-600",children:"Nhà Cung Cấp"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-1.5 ml-1 tracking-widest",children:"Tên đối tác"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 drop-shadow-[0_0_5px_rgba(16,185,129,0.5)]",size:20}),e.jsx("input",{required:!0,type:"text",className:"input-premium w-full pr-4 py-3.5 font-black uppercase",style:{paddingLeft:"3.5rem"},placeholder:"VÍ DỤ: NGUYỄN VĂN A",value:a.name,onChange:t=>r({...a,name:t.target.value}),autoComplete:"off"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-1.5 ml-1 tracking-widest",children:"Số CCCD"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 drop-shadow-[0_0_5px_rgba(16,185,129,0.5)]",size:20}),e.jsx("input",{type:"text",className:"input-premium w-full pr-4 py-3.5 font-bold",style:{paddingLeft:"3.5rem"},placeholder:"Số thẻ căn cước",value:a.cccd||"",onChange:t=>r({...a,cccd:t.target.value}),autoComplete:"off"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-1.5 ml-1 tracking-widest",children:"Điện thoại"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 drop-shadow-[0_0_5px_rgba(16,185,129,0.5)]",size:20}),e.jsx("input",{type:"text",className:"input-premium w-full pr-4 py-3.5 font-bold",style:{paddingLeft:"3.5rem"},placeholder:"Số điện thoại",value:a.phone,onChange:t=>r({...a,phone:t.target.value}),autoComplete:"off"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-1.5 ml-1 tracking-widest",children:"Địa chỉ"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 drop-shadow-[0_0_5px_rgba(16,185,129,0.5)]",size:20}),e.jsx("input",{type:"text",className:"input-premium w-full pr-4 py-3.5 font-bold",style:{paddingLeft:"3.5rem"},placeholder:"Địa chỉ liên hệ",value:a.address,onChange:t=>r({...a,address:t.target.value}),autoComplete:"off"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-1.5 ml-1 tracking-widest",children:"Công nợ ban đầu"}),e.jsx("input",{type:"number",className:"input-premium w-full p-4 font-black text-blue-600 dark:text-blue-400",value:a.debt_balance,onChange:t=>r({...a,debt_balance:parseFloat(t.target.value)||0}),autoComplete:"off"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t dark:border-slate-800",children:[e.jsx("button",{type:"button",onClick:o,className:"px-8 py-3.5 text-gray-400 font-black uppercase text-xs hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:"Hủy bỏ"}),e.jsx("button",{type:"submit",className:"px-10 py-3.5 bg-emerald-600 text-white rounded-[1.5rem] font-black uppercase text-xs shadow-xl shadow-emerald-500/20 hover:bg-emerald-700 active:scale-95 transition-all",children:"Lưu đối tác"})]})]})]})]}),e.jsx(x,{children:d&&e.jsx(b,{message:d.message,type:d.type,onClose:()=>m(null)})})]})})}export{S as P};
