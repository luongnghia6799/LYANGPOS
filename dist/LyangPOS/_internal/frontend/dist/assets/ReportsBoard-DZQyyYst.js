import{r as d,j as e}from"./vendor-C23Namvk.js";import{a as S,u as T,w as Y}from"./vendor-utils-C44aPrMG.js";import{f as B,d as h,c as D}from"./index-DXxzNUOO.js";import{e as J,D as Z,C as ee,a as te,L as ae,b as se,p as re,c as ne,d as le,A as oe,P as de,f as ie,i as ce}from"./vendor-charts-6q8tr750.js";import{v as H,ah as he,b as xe,at as pe,$ as ue,n as L,U as me,r as be,T as ge,w as fe,d as je,W as Ne,L as ve,p as ye,af as ke,S as Ce,G as we}from"./vendor-icons-C8Df64wb.js";import{A as _e,m as M}from"./vendor-framer-DVZK1f_z.js";ee.register(te,ae,se,re,ne,le,oe,de,ie,ce);const q=()=>{const o=new Date,x=new Date(o.getFullYear(),o.getMonth(),1),n=new Date(o.getFullYear(),o.getMonth()+1,0),p=b=>`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`;return{startDate:p(x),endDate:p(n)}};function Pe(){const[o,x]=d.useState(q()),[n,p]=d.useState("sales"),[b,g]=d.useState(!1),[c,U]=d.useState([]),[f,I]=d.useState([]),[C,z]=d.useState([]),[Q,K]=d.useState([]),[i,F]=d.useState(""),[m,$]=d.useState("All"),[Se,Te]=d.useState("All");d.useEffect(()=>{G()},[]),d.useEffect(()=>{V()},[o,n]);const G=async()=>{try{const[t,a]=await Promise.all([S.get("/api/products"),S.get("/api/partners")]);I(t.data),z(a.data);const s=[...new Set(t.data.map(l=>l.brand).filter(Boolean))].sort();K(s)}catch(t){console.error("Error fetching init data",t)}},V=async()=>{g(!0);try{const t=await S.get("/api/orders",{params:{start_date:o.startDate,end_date:o.endDate,limit:1e4}});U(t.data.items||t.data)}catch(t){console.error("Error fetching report data",t)}finally{g(!1)}},v=d.useMemo(()=>{if(n!=="sales")return[];let t={};return c.forEach(a=>{a.type==="Sale"&&(a.display_id==="NODAU"||a.display_id==="#NODAU"||a.details.forEach(s=>{const l=f.find(_=>_.id===s.product_id);if(m!=="All"&&l?.brand!==m||i&&!s.product_name.toLowerCase().includes(i.toLowerCase()))return;t[s.product_id]||(t[s.product_id]={id:s.product_id,code:l?.code||"",name:s.product_name,unit:s.product_unit,qty:0,revenue:0,capital:0,profit:0});const r=s.quantity,u=s.price*r,y=(s.cost_price||0)*r;t[s.product_id].qty+=r,t[s.product_id].revenue+=u,t[s.product_id].capital+=y,t[s.product_id].profit+=u-y}))}),Object.values(t).sort((a,s)=>s.revenue-a.revenue)},[c,f,n,m,i]),A=d.useMemo(()=>{if(n!=="sales")return null;const t={};c.forEach(s=>{if(s.type!=="Sale"||s.display_id==="NODAU"||s.display_id==="#NODAU")return;const l=s.date.split("T")[0];t[l]||(t[l]={revenue:0,profit:0}),t[l].revenue+=s.total_amount;let r=0;s.details.forEach(u=>r+=(u.cost_price||0)*u.quantity),t[l].profit+=s.total_amount-r});const a=Object.keys(t).sort();return{labels:a.map(s=>s.split("-").slice(1).join("/")),datasets:[{label:"Doanh Thu",data:a.map(s=>t[s].revenue),borderColor:"#2d5016",backgroundColor:"rgba(45, 80, 22, 0.1)",yAxisID:"y",fill:!0,tension:.4,borderWidth:3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#2d5016",pointBorderColor:"#fff",pointBorderWidth:2},{label:"Lợi Nhuận",data:a.map(s=>t[s].profit),borderColor:"#4a7c59",backgroundColor:"rgba(74, 124, 89, 0.1)",yAxisID:"y",fill:!0,tension:.4,borderDash:[5,5],borderWidth:3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#4a7c59",pointBorderColor:"#fff",pointBorderWidth:2}]}},[c,n]),R=d.useMemo(()=>{if(n!=="customers")return[];let t={};return c.forEach(a=>{if(a.type!=="Sale"||a.display_id==="NODAU"||a.display_id==="#NODAU"||!a.partner_id)return;const s=C.find(l=>l.id===a.partner_id);i&&!s?.name.toLowerCase().includes(i.toLowerCase())||(t[a.partner_id]||(t[a.partner_id]={id:a.partner_id,name:s?.name||"Khách lẻ",phone:s?.phone,orderCount:0,totalRevenue:0,debtIncrease:0}),t[a.partner_id].orderCount+=1,t[a.partner_id].totalRevenue+=a.total_amount,a.payment_method==="Debt"&&(t[a.partner_id].debtIncrease+=a.total_amount-(a.amount_paid||0)))}),Object.values(t).sort((a,s)=>s.totalRevenue-a.totalRevenue)},[c,C,n,i]),w=d.useMemo(()=>{if(n!=="purchases")return[];let t={};return c.forEach(a=>{if(a.type!=="Purchase"||a.display_id==="NODAU"||a.display_id==="#NODAU")return;const s=C.find(l=>l.id===a.partner_id);i&&!s?.name.toLowerCase().includes(i.toLowerCase())||(t[a.partner_id]||(t[a.partner_id]={id:a.partner_id,name:s?.name||"Nhà cung cấp lạ",phone:s?.phone,importCount:0,totalImport:0}),t[a.partner_id].importCount+=1,t[a.partner_id].totalImport+=a.total_amount)}),Object.values(t).sort((a,s)=>s.totalImport-a.totalImport)},[c,C,n,i]),O=d.useMemo(()=>{if(n!=="inventory")return[];let t=f.map(s=>m!=="All"&&s.brand!==m||i&&!s.name.toLowerCase().includes(i.toLowerCase())?null:{id:s.id,code:s.code,name:s.name,unit:s.unit,currentStock:s.stock,importQty:0,exportQty:0,importVal:0,exportVal:0}).filter(Boolean);const a=new Map(t.map(s=>[s.id,s]));return c.forEach(s=>{s.display_id==="NODAU"||s.display_id==="#NODAU"||s.details.forEach(l=>{const r=a.get(l.product_id);r&&(s.type==="Purchase"?(r.importQty+=l.quantity,r.importVal+=l.price*l.quantity):s.type==="Sale"&&(r.exportQty+=l.quantity,r.exportVal+=l.price*l.quantity))})}),t.forEach(s=>{s.openingStock=s.currentStock-s.importQty+s.exportQty}),t.sort((s,l)=>l.exportQty-s.exportQty)},[c,f,n,m,i]),P=d.useMemo(()=>{if(n!=="inventory")return[];const t=new Set;return c.forEach(a=>{if(a.type==="Sale"){if(a.display_id==="NODAU"||a.display_id==="#NODAU")return;a.details.forEach(s=>t.add(s.product_id))}}),f.filter(a=>m!=="All"&&a.brand!==m||i&&!a.name.toLowerCase().includes(i.toLowerCase())?!1:a.stock>0&&!t.has(a.id)).map(a=>({...a,value:a.stock*a.cost_price})).sort((a,s)=>s.value-a.value)},[c,f,n,m,i]),j=d.useMemo(()=>{if(n!=="brands")return[];let t={};return c.forEach(a=>{a.type==="Sale"&&(a.display_id==="NODAU"||a.display_id==="#NODAU"||a.details.forEach(s=>{const r=f.find(X=>X.id===s.product_id)?.brand||"Khác";if(i&&!r.toLowerCase().includes(i.toLowerCase()))return;t[r]||(t[r]={name:r,revenue:0,profit:0,qty:0});const u=s.quantity,y=s.price*u,_=(s.cost_price||0)*u;t[r].revenue+=y,t[r].profit+=y-_,t[r].qty+=u}))}),Object.values(t).sort((a,s)=>s.revenue-a.revenue)},[c,f,n,i]),E=d.useMemo(()=>{if(n!=="brands")return null;const t=j.slice(0,6),a=j.slice(6).reduce((r,u)=>r+u.revenue,0),s=t.map(r=>r.name);a>0&&s.push("Khác");const l=t.map(r=>r.revenue);return a>0&&l.push(a),{labels:s,datasets:[{data:l,backgroundColor:["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#94a3b8"],borderWidth:0}]}},[j,n]),W=()=>{let t="",a=[];n==="sales"?(t="BaoCao_BanHang",a=v.map(r=>({"Mã SP":r.code,"Tên SP":r.name,ĐVT:r.unit,"Số lượng":r.qty,"Doanh thu":r.revenue,"Giá vốn":r.capital,"Lợi nhuận":r.profit}))):n==="customers"?(t="BaoCao_KhachHang",a=R.map(r=>({"Tên KH":r.name,SĐT:r.phone,"Số đơn":r.orderCount,"Doanh số":r.totalRevenue,"Nợ tăng thêm":r.debtIncrease}))):n==="purchases"?(t="BaoCao_NhapHang",a=w.map(r=>({"Nhà CC":r.name,SĐT:r.phone,"Số phiếu nhập":r.importCount,"Tổng tiền hàng":r.totalImport}))):n==="inventory"?(t="BaoCao_XuatNhapTon",a=O.map(r=>({"Mã SP":r.code,"Tên SP":r.name,"Tồn đầu":r.openingStock,Nhập:r.importQty,Xuất:r.exportQty,"Tồn cuối":r.currentStock}))):n==="brands"&&(t="BaoCao_NhanHang",a=j.map(r=>({"Nhãn hàng":r.name,"Doanh số":r.revenue,"Lợi nhuận":r.profit,"Số lượng bán":r.qty})));const s=T.json_to_sheet(a),l=T.book_new();T.book_append_sheet(l,s,"Sheet1"),Y(l,`${t}_${o.startDate}_${o.endDate}.xlsx`)};return e.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-br from-[#faf8f3] to-[#f5f1e8] dark:from-slate-900 dark:to-slate-800 overflow-hidden font-sans transition-colors duration-300 relative",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] rounded-full bg-[#2d5016] opacity-[0.03] blur-[120px] pointer-events-none"}),e.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] rounded-full bg-[#4a7c59] opacity-[0.03] blur-[120px] pointer-events-none"}),e.jsxs("div",{className:"bg-transparent px-4 pt-4 pb-2 flex flex-col gap-4 z-30 sticky top-0 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-black text-[#2d5016] dark:text-[#4a7c59] uppercase flex items-center gap-3 drop-shadow-sm",children:[e.jsx(H,{className:"text-[#4a7c59]"})," TRUNG TÂM BÁO CÁO"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:W,className:"bg-white/60 dark:bg-slate-800/60 text-[#2d5016] dark:text-[#4a7c59] hover:bg-white/80 dark:hover:bg-slate-800 border-2 border-[#d4a574]/30 px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-all shadow-lg backdrop-blur-md",children:[e.jsx(he,{size:18})," Xuất Excel"]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-900 p-1.5 rounded-lg border dark:border-slate-700",children:[e.jsx(xe,{size:18,className:"text-slate-400 ml-2"}),e.jsx("input",{type:"date",value:o.startDate,onChange:t=>x({...o,startDate:t.target.value}),className:"bg-transparent border-none outline-none text-sm font-bold w-32 dark:text-white"}),e.jsx(pe,{size:14,className:"text-slate-400"}),e.jsx("input",{type:"date",value:o.endDate,onChange:t=>x({...o,endDate:t.target.value}),className:"bg-transparent border-none outline-none text-sm font-bold w-32 dark:text-white"})]}),e.jsx("div",{className:"flex gap-1",children:e.jsx("button",{onClick:()=>x(q()),className:"px-3 py-1.5 text-xs font-bold bg-white text-slate-600 border rounded hover:bg-slate-50",children:"Tháng này"})}),e.jsx("div",{className:"h-6 w-px bg-slate-200 mx-2"}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),e.jsx("input",{type:"text",placeholder:"Tìm SP / Khách / Hãng...",value:i,onChange:t=>F(t.target.value),className:"pl-9 pr-4 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-bold outline-none focus:border-emerald-500 w-64"})]}),(n==="sales"||n==="inventory")&&e.jsxs("select",{className:"pl-3 pr-8 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-bold outline-none focus:border-emerald-500 appearance-none cursor-pointer",value:m,onChange:t=>$(t.target.value),children:[e.jsx("option",{value:"All",children:"Tất cả hãng"}),Q.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden z-20 relative text-gray-800 dark:text-gray-100",children:[e.jsx("div",{className:"w-64 bg-white/60 dark:bg-slate-800/60 backdrop-blur-md border-r-2 border-[#d4a574]/30 flex flex-col overflow-y-auto z-20 shadow-sm",children:e.jsxs("div",{className:"p-4 space-y-1",children:[e.jsx(k,{active:n==="sales",onClick:()=>p("sales"),icon:e.jsx(L,{size:18}),label:"Hiệu Quả Bán Hàng",desc:"Biểu đồ doanh thu"}),e.jsx(k,{active:n==="customers",onClick:()=>p("customers"),icon:e.jsx(me,{size:18}),label:"Khách Hàng",desc:"Top mua, Công nợ"}),e.jsx(k,{active:n==="inventory",onClick:()=>p("inventory"),icon:e.jsx(be,{size:18}),label:"Xuất - Nhập - Tồn",desc:"Cân đối kho hàng"}),e.jsx(k,{active:n==="purchases",onClick:()=>p("purchases"),icon:e.jsx(ge,{size:18}),label:"Nhập Hàng (Mới)",desc:"Chi tiêu & Nhà CC"}),e.jsx(k,{active:n==="brands",onClick:()=>p("brands"),icon:e.jsx(fe,{size:18}),label:"Phân Tích Nhãn Hàng",desc:"Thị phần, Tăng trưởng"})]})}),e.jsx("div",{className:"flex-1 overflow-auto bg-[var(--bg-color)] dark:bg-slate-900 p-6 relative",children:e.jsx(_e,{mode:"wait",children:b?e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--primary-color)]"})},"loading"):e.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,ease:"easeOut"},className:"max-w-6xl mx-auto space-y-6",children:[n==="sales"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(N,{title:"Tổng Doanh Thu",value:v.reduce((t,a)=>t+a.revenue,0),icon:e.jsx(je,{}),color:"text-emerald-600"}),e.jsx(N,{title:"Tổng Lợi Nhuận",value:v.reduce((t,a)=>t+a.profit,0),icon:e.jsx(L,{}),color:"text-blue-600"}),e.jsx(N,{title:"Tổng SL Bán",value:v.reduce((t,a)=>t+a.qty,0),isNumber:!0,icon:e.jsx(Ne,{}),color:"text-purple-600"}),e.jsx(N,{title:"Số Mặt Hàng",value:v.length,isNumber:!0,icon:e.jsx(ve,{}),color:"text-orange-600"})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-slate-800/60 p-6 rounded-3xl border-2 border-[#d4a574]/30 shadow-lg backdrop-blur-md",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 text-[#2d5016] dark:text-slate-200 flex items-center gap-2",children:[e.jsx(H,{className:"text-[#4a7c59]",size:20}),"Biểu đồ Doanh Thu & Lợi Nhuận"]}),e.jsx("div",{className:"h-80 w-full",children:A&&e.jsx(J,{data:A,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#2d5016",font:{weight:"bold",size:12},usePointStyle:!0,padding:15}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#2d5016",bodyColor:"#2d5016",borderColor:"#d4a574",borderWidth:2,padding:12,displayColors:!0,callbacks:{label:function(t){return t.dataset.label+": "+B(t.parsed.y)}}}},scales:{y:{grid:{color:"rgba(212, 165, 116, 0.1)"},ticks:{color:"#8b6f47",font:{weight:"bold"}}},x:{grid:{color:"rgba(212, 165, 116, 0.1)"},ticks:{color:"#8b6f47",font:{weight:"bold"}}}}}})})]})]}),n==="brands"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-1 bg-white/60 dark:bg-slate-800/60 p-6 rounded-3xl border border-white/20 dark:border-white/5 shadow-sm flex flex-col items-center justify-center backdrop-blur-md",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-800 dark:text-slate-200 self-start",children:"Tỷ trọng Doanh Số"}),e.jsx("div",{className:"h-64 w-full relative",children:E&&e.jsx(Z,{data:E,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]}),e.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-4 content-start",children:[e.jsx(N,{title:"Hãng Bán Chạy Nhất",value:j[0]?.revenue||0,icon:e.jsx(L,{}),color:"emerald"}),e.jsx(N,{title:"Lợi Nhuận Cao Nhất",value:j.sort((t,a)=>a.profit-t.profit)[0]?.profit||0,icon:e.jsx(ye,{}),color:"blue"}),e.jsxs("div",{className:"col-span-2 bg-white/60 dark:bg-slate-800/60 p-4 rounded-3xl border border-white/20 dark:border-white/5 shadow-sm backdrop-blur-md",children:[e.jsx("div",{className:"text-slate-500 font-bold text-sm mb-2",children:"Top 5 Nhãn Hàng Chủ Lực"}),e.jsx("div",{className:"flex flex-col gap-2",children:j.slice(0,5).map((t,a)=>e.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-dashed dark:border-slate-700 pb-2 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-xs font-bold text-slate-600",children:a+1}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:t.name})]}),e.jsx("span",{className:"font-mono text-emerald-600",children:B(t.revenue)})]},t.name))})]})]})]})}),n==="purchases"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(N,{title:"Tổng Chi Nhập Hàng",value:w.reduce((t,a)=>t+a.totalImport,0),icon:e.jsx(ke,{}),color:"orange"}),e.jsx(N,{title:"Số Phiếu Nhập",value:w.reduce((t,a)=>t+a.importCount,0),isNumber:!0,icon:e.jsx(Ce,{}),color:"blue"})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-slate-800/60 rounded-3xl shadow-sm border border-white/20 dark:border-white/5 overflow-hidden mt-4 backdrop-blur-md",children:[e.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800",children:e.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:"Chi Tiết Nhập Hàng Theo Nhà Cung Cấp"})}),e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-300 font-bold uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Nhà Cung Cấp"}),e.jsx("th",{className:"p-4 text-center",children:"SĐT"}),e.jsx("th",{className:"p-4 text-right",children:"Số Phiếu"}),e.jsx("th",{className:"p-4 text-right text-orange-600",children:"Tổng Giá Trị"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:w.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"p-4 font-bold text-slate-700 dark:text-slate-200",children:t.name}),e.jsx("td",{className:"p-4 text-center text-slate-500",children:t.phone}),e.jsx("td",{className:"p-4 text-right",children:t.importCount}),e.jsx("td",{className:"p-4 text-right font-black text-orange-600",children:h(t.totalImport)})]},t.id))})]})]})]}),n!=="purchases"&&e.jsxs("div",{className:"bg-white/60 dark:bg-slate-800/60 rounded-3xl shadow-sm border border-white/20 dark:border-white/5 overflow-hidden mt-6 backdrop-blur-md",children:[n==="inventory"&&P.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"p-4 flex items-center gap-2 text-red-700 dark:text-red-400 font-bold",children:[e.jsx(we,{})," CẢNH BÁO: HÀNG TỒN KHO LÂU / KHÔNG BÁN ĐƯỢC TRONG KỲ"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-red-100/50 dark:bg-red-900/40 text-red-800 dark:text-red-300 font-bold uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Sản Phẩm"}),e.jsx("th",{className:"p-3 text-right",children:"Tồn Kho"}),e.jsx("th",{className:"p-3 text-right",children:"Giá Vốn"}),e.jsx("th",{className:"p-3 text-right",children:"Giá Trị Tồn (Vốn Chết)"})]})}),e.jsx("tbody",{className:"divide-y divide-red-100 dark:divide-red-800/50",children:P.slice(0,5).map(t=>e.jsxs("tr",{className:"hover:bg-red-100/30",children:[e.jsx("td",{className:"p-3 font-medium text-slate-700 dark:text-red-100",children:t.name}),e.jsxs("td",{className:"p-3 text-right font-bold",children:[h(t.stock)," ",t.unit]}),e.jsx("td",{className:"p-3 text-right text-slate-500",children:h(t.cost_price)}),e.jsx("td",{className:"p-3 text-right font-black text-red-600",children:h(t.value)})]},t.id))})]})})]}),e.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800",children:e.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:n==="inventory"?"Chi Tiết Xuất - Nhập - Tồn":"Chi tiết dữ liệu"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-300 font-bold uppercase text-xs",children:e.jsxs("tr",{children:[n==="sales"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-4",children:"Tên Sản Phẩm"}),e.jsx("th",{className:"p-4 text-center",children:"ĐVT"}),e.jsx("th",{className:"p-4 text-right",children:"Số Lượng"}),e.jsx("th",{className:"p-4 text-right",children:"Doanh Thu"}),e.jsx("th",{className:"p-4 text-right text-emerald-600",children:"Lợi Nhuận"})]}),n==="customers"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-4",children:"Khách Hàng"}),e.jsx("th",{className:"p-4 text-center",children:"SĐT"}),e.jsx("th",{className:"p-4 text-right",children:"Số Đơn"}),e.jsx("th",{className:"p-4 text-right",children:"Tổng Mua"}),e.jsx("th",{className:"p-4 text-right text-red-500",children:"Nợ Phát Sinh"})]}),n==="inventory"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-4",children:"Sản Phẩm"}),e.jsx("th",{className:"p-4 text-center",children:"Tồn Đầu (Ước tính)"}),e.jsx("th",{className:"p-4 text-center text-blue-600",children:"+ Nhập"}),e.jsx("th",{className:"p-4 text-center text-orange-600",children:"- Xuất"}),e.jsx("th",{className:"p-4 text-center font-bold",children:"BLOCK Tồn Cuối"})]}),n==="brands"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-4",children:"Nhãn Hàng"}),e.jsx("th",{className:"p-4 text-right",children:"Số Lượng Bán"}),e.jsx("th",{className:"p-4 text-right",children:"Doanh Thu"}),e.jsx("th",{className:"p-4 text-right text-emerald-600",children:"Lợi Nhuận Gộp"}),e.jsx("th",{className:"p-4 text-right text-slate-400",children:"Tỷ suất LN"})]})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[n==="sales"&&v.map((t,a)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsxs("td",{className:"p-4 font-medium text-slate-700 dark:text-slate-200",children:[e.jsx("div",{children:t.name}),e.jsx("div",{className:"text-xs text-slate-400",children:t.code})]}),e.jsx("td",{className:"p-4 text-center text-slate-500",children:t.unit}),e.jsx("td",{className:"p-4 text-right font-bold",children:h(t.qty)}),e.jsx("td",{className:"p-4 text-right font-bold text-slate-700 dark:text-slate-300",children:h(t.revenue)}),e.jsx("td",{className:"p-4 text-right font-bold text-emerald-600",children:h(t.profit)})]},t.id)),n==="customers"&&R.map((t,a)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"p-4 font-bold text-slate-700 dark:text-slate-200",children:t.name}),e.jsx("td",{className:"p-4 text-center text-slate-500",children:t.phone}),e.jsx("td",{className:"p-4 text-right",children:t.orderCount}),e.jsx("td",{className:"p-4 text-right font-black text-emerald-600",children:h(t.totalRevenue)}),e.jsx("td",{className:"p-4 text-right font-bold text-red-500",children:h(t.debtIncrease)})]},t.id)),n==="inventory"&&O.map((t,a)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"p-4 font-medium text-slate-700 dark:text-slate-200",children:t.name}),e.jsx("td",{className:"p-4 text-center text-slate-500",children:h(t.openingStock)}),e.jsx("td",{className:"p-4 text-center text-blue-600 font-bold",children:t.importQty>0?`+${t.importQty}`:"-"}),e.jsx("td",{className:"p-4 text-center text-orange-600 font-bold",children:t.exportQty>0?`-${t.exportQty}`:"-"}),e.jsx("td",{className:"p-4 text-center font-black bg-slate-50 dark:bg-slate-800",children:h(t.currentStock)})]},t.id)),n==="brands"&&j.map((t,a)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"p-4 font-bold text-slate-700 dark:text-slate-200",children:t.name}),e.jsx("td",{className:"p-4 text-right font-bold text-slate-500",children:h(t.qty)}),e.jsx("td",{className:"p-4 text-right font-black text-slate-700 dark:text-slate-300",children:h(t.revenue)}),e.jsx("td",{className:"p-4 text-right font-bold text-emerald-600",children:h(t.profit)}),e.jsxs("td",{className:"p-4 text-right text-xs text-slate-400",children:[t.revenue>0?Math.round(t.profit/t.revenue*100):0,"%"]})]},t.name))]})]})})]})]},n)})})]})]})}const k=({active:o,onClick:x,icon:n,label:p,desc:b,disabled:g})=>e.jsxs("button",{onClick:x,disabled:g,className:D("w-full text-left p-3 rounded-2xl flex items-center gap-4 transition-all duration-300",o?"bg-gradient-to-r from-[#2d5016] to-[#4a7c59] text-white shadow-lg shadow-[#2d5016]/30 scale-[1.02]":"bg-white/40 dark:bg-slate-800/40 text-[#8b6f47] hover:bg-[#d4a574]/10 dark:text-slate-400 dark:hover:bg-slate-700/50 border border-[#d4a574]/20",g&&"opacity-50 cursor-not-allowed"),children:[e.jsx("div",{className:D("p-2.5 rounded-xl transition-colors",o?"bg-white/20 text-white":"bg-[#d4a574]/10 dark:bg-slate-800 text-[#8b6f47]"),children:n}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:p}),e.jsx("div",{className:D("text-xs opacity-80",o?"text-white/80":"text-[#8b6f47]/60"),children:b})]})]}),N=({title:o,value:x,icon:n,color:p,isNumber:b})=>{const g={emerald:{bg:"bg-[#2d5016]",text:"text-[#2d5016]",glow:"from-[#2d5016]/20"},blue:{bg:"bg-[#4a7c59]",text:"text-[#4a7c59]",glow:"from-[#4a7c59]/20"},purple:{bg:"bg-[#8b6f47]",text:"text-[#8b6f47]",glow:"from-[#8b6f47]/20"},orange:{bg:"bg-[#f4c430]",text:"text-[#f4c430]",glow:"from-[#f4c430]/20"}},c=g[p]||g.emerald;return e.jsxs("div",{className:"relative group overflow-hidden rounded-2xl transition-all duration-300 hover:scale-[1.02] hover:shadow-xl",children:[e.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-r ${c.glow} to-transparent blur-xl`}),e.jsxs("div",{className:"relative h-full bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl rounded-2xl p-6 border-2 border-[#d4a574]/30 shadow-sm flex flex-col items-center justify-center gap-4 z-10",children:[e.jsx("div",{className:`p-4 rounded-2xl ${c.bg} shadow-lg`,children:e.jsx("div",{className:"text-white",children:n})}),e.jsxs("div",{className:"text-center w-full",children:[e.jsx("div",{className:"text-[#8b6f47] dark:text-[#d4a574] text-xs font-bold uppercase tracking-wider mb-2",children:o}),e.jsx("div",{className:"text-xl font-black text-[#2d5016] dark:text-white drop-shadow-sm",children:b?typeof x=="string"?x:h(x):B(x)})]})]})]})};export{Pe as default};
