import{r as c,a0 as Wt,j as e}from"./vendor-C23Namvk.js";import{a as q}from"./vendor-utils-C44aPrMG.js";import{c as p,a as Rt,P as nt,b as I,f as it,L as At}from"./index-UsWd1F3S.js";import{D as ot}from"./settings-BT5ickwW.js";import{P as lt}from"./PrintTemplate-Caxf_GDA.js";import{T as Mt}from"./Toast-DQljrx14.js";import{P as ct}from"./ProductEditModal-DOGOkWHJ.js";import{P as dt}from"./PartnerEditModal-Dpv7L0QI.js";import{W as Me,c as $e,G as pt,X as He,I as ut,J as mt,N as Fe,O as Ne,Q as $t,V as Ht,Y as _e,k as Ft,_ as xt,L as ht,$ as Bt,a0 as ft,j as Kt,l as Ut,d as Vt,a1 as Qt,a2 as Gt,a3 as Jt}from"./vendor-icons-B3K5gD8o.js";import{A as $,m as h}from"./vendor-framer-DVZK1f_z.js";function or(){const[D,gt]=c.useState([]),[H,bt]=c.useState([]),[S,E]=c.useState(""),[u,y]=c.useState([]),[d,k]=c.useState(null),[J,P]=c.useState(""),[Ce,T]=c.useState(!1),[K,X]=c.useState(""),[O,j]=c.useState(0),[b,L]=c.useState(()=>(localStorage.getItem("unified_pos_mode")||"Retail")==="Wholesale"?"Pending":"Cash"),[ue,me]=c.useState(null),[ae,Be]=c.useState(!1),[w,se]=c.useState(null),[Se,Ke]=c.useState(null),[W,qe]=c.useState(0),U=Wt(),[z,Ie]=c.useState(()=>{const t=localStorage.getItem("held_invoices");return t?JSON.parse(t):[]}),[De,V]=c.useState(!1),[x,Y]=c.useState(0),[f,Pe]=c.useState({}),[F,yt]=c.useState(ot),[xe,he]=c.useState(!1),[fe,ge]=c.useState(!1),[Ue,Ve]=c.useState(""),[Te,Z]=c.useState(null),[N,kt]=c.useState(()=>localStorage.getItem("unified_pos_mode")||"Retail"),[i,R]=c.useState({product:null,quantity:1,price:0,secondary_qty:0,name:""}),[ee,B]=c.useState(null),[te,Qe]=c.useState(""),[ne,be]=c.useState(0),[Le,ie]=c.useState(!1),[Ge,vt]=c.useState(null),[ze,re]=c.useState(!1),[wt,ye]=c.useState(null),jt=c.useRef({}),A=c.useRef(null),Q=c.useRef(null),Ee=c.useRef(null),ke=c.useRef(null),Oe=c.useRef(null),We=c.useRef(null),oe=c.useRef(null),[Nt,Re]=c.useState(!1),[_t,Je]=c.useState(null),[Xe,Ct]=c.useState(!1),[Ye,St]=c.useState(new Date),[qt,Ze]=c.useState(!1);c.useEffect(()=>{const t=setInterval(()=>St(new Date),1e3);return()=>clearInterval(t)},[]);const et=c.useMemo(()=>i.product?i.price*i.quantity:0,[i.product,i.price,i.quantity]),_=c.useMemo(()=>u.reduce((t,r)=>t+r.price*r.quantity,0)+et,[u,et]),ve=d?d.debt_balance:0,It=b==="Debt"?ve+(_>=0?_-O:_+O):ve;c.useEffect(()=>{localStorage.setItem("held_invoices",JSON.stringify(z))},[z]),c.useEffect(()=>{const t=r=>{const a=r.key.toUpperCase();r.key==="Escape"?(Ce||De||Le||xe||fe||ze||S||ee!==null)&&(T(!1),V(!1),ie(!1),he(!1),ge(!1),re(!1),E(""),B(null)):a===(F.kb_search||"F2").toUpperCase()?(r.preventDefault(),A.current?.focus()):a===(F.kb_save||"F12").toUpperCase()?(r.preventDefault(),de(!1)):a===(F.kb_pay||"F9").toUpperCase()?(r.preventDefault(),de(!0)):a===(F.kb_new||"F4").toUpperCase()?(r.preventDefault(),M()):a===(F.kb_hold||"F8").toUpperCase()&&(r.preventDefault(),rt())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[u,d,O,K,F,Ce,De,Le,xe,fe,ze,S,ee]),c.useEffect(()=>{},[]);const Ae=()=>{const t=localStorage.getItem("pos_draft");if(t)try{const r=JSON.parse(t);if(y(r.cart||[]),X(r.note||""),j(r.amountPaid||0),L(r.paymentMethod||(localStorage.getItem("unified_pos_mode")==="Wholesale"?"Pending":"Cash")),r.selectedPartnerId){const a=H.find(n=>n.id===r.selectedPartnerId);k(a||null)}else k(null);return se(null),qe(0),!0}catch(r){console.error("Error loading draft",r)}return!1};c.useEffect(()=>{if(le(),ce(),Tt(),U.state?.editOrder||Ae(),U.state?.editOrder){const t=U.state.editOrder;tt(t)}else{const r=new URLSearchParams(window.location.search).get("edit");r?Dt(r):w&&M(!1)}Ct(!0)},[U.search,U.state]);const Dt=async t=>{try{const r=await q.get(`/api/orders/${t}`);r.data&&tt(r.data)}catch(r){console.error("Error fetching order",r),Z({message:"Kh√¥ng t√¨m th·∫•y h√≥a ƒë∆°n",type:"error"})}},tt=t=>{se(t.id),y(t.details.map(r=>({product_id:r.product_id,product_name:r.product_name,unit:r.product_unit,secondary_unit:r.secondary_unit,multiplier:r.multiplier||1,price:r.price,cost_price:r.cost_price,quantity:r.quantity,secondary_qty:r.quantity/(r.multiplier||1),stock:r.stock||0,active_ingredient:r.active_ingredient}))),X(t.note||""),j(t.amount_paid||0),L(t.payment_method),Ke(t.partner_id),P(""),E(""),T(!1)},Pt=t=>{kt(t),localStorage.setItem("unified_pos_mode",t),u.length===0&&!w&&L(t==="Wholesale"?"Pending":"Cash")};c.useEffect(()=>{b==="Cash"&&j(_)},[b,_]),c.useEffect(()=>{if(Xe&&!w){const t={cart:u,selectedPartnerId:d?.id,note:K,amountPaid:O,paymentMethod:b};localStorage.setItem("pos_draft",JSON.stringify(t))}},[u,d,K,O,b,w,Xe]),c.useEffect(()=>{if(H.length>0){if(Se){const t=H.find(r=>r.id==Se);t&&(k(t),Ke(null),P(""))}else if(!w){const t=localStorage.getItem("pos_draft");if(t)try{const r=JSON.parse(t);if(r.selectedPartnerId){const a=H.find(n=>n.id===r.selectedPartnerId);a&&(k(a),P(""))}}catch{}}}},[H,Se,w,U.state]);const Tt=async()=>{try{const[t,r]=await Promise.all([q.get("/api/print-templates?module=Sale"),q.get("/api/settings")]);let a={...ot};if(r.data&&(a={...a,...r.data}),t.data&&t.data.length>0){const s=t.data.find(o=>o.is_default)||t.data[0];if(s)try{const o=JSON.parse(s.config);a={...a,...o}}catch(o){console.error("Error parsing template config",o)}}yt(a);const n=w||U.state?.editOrder||new URLSearchParams(window.location.search).get("edit");u.length===0&&!n&&(L(N==="Wholesale"?"Pending":"Cash"),j(_))}catch(t){console.error("L·ªói khi t·∫£i c√†i ƒë·∫∑t:",t)}},le=async()=>{try{const t=await q.get("/api/products");gt(t.data)}catch(t){console.error(t)}},ce=async()=>{try{const t=await q.get("/api/partners");bt(t.data)}catch(t){console.error(t)}},Lt=async t=>{if(!t){Pe({});return}try{const r=await q.get(`/api/custom-prices/${t}`);Pe(r.data)}catch(r){console.error(r)}};c.useEffect(()=>{d?Lt(d.id):Pe({})},[d]),c.useEffect(()=>{u.length>0&&y(t=>t.map(r=>{const a=f[r.product_id];if(a!==void 0)return{...r,price:a};const n=D.find(s=>s.id===r.product_id);return{...r,price:n?n.sale_price:r.price}}))},[f]),c.useEffect(()=>{b==="Cash"&&j(_)},[_,b]);const we=(t,r=null,a=null)=>{const n=r!==null?r:1,s=u.find(m=>m.product_id===t.id),o=t.sale_price,l=a!==null?a:f[t.id]!==void 0?f[t.id]:o;y(s?u.map(m=>m.product_id===t.id?{...m,quantity:m.quantity+n,price:l,secondary_qty:(m.quantity+n)/(m.multiplier||1)}:m):[{product_id:t.id,product_name:t.name,unit:t.unit,secondary_unit:t.secondary_unit,multiplier:t.multiplier||1,price:l,cost_price:t.cost_price,quantity:n,secondary_qty:n/(t.multiplier||1),stock:t.stock,is_combo:t.is_combo,active_ingredient:t.active_ingredient},...u]),E(""),Y(0),R({product:null,quantity:1,price:0,secondary_qty:0,name:""}),setTimeout(()=>{const m=A.current;m&&(m.focus(),m.select())},10)},je=(t,r,a)=>{const n=[...u],s=n[t];r==="secondary_qty"?(s.secondary_qty=a,s.quantity=a*s.multiplier):r==="quantity"?(s.quantity=a,s.secondary_qty=a/s.multiplier):s[r]=a,y(n)},zt=t=>{y(u.filter((r,a)=>a!==t))},de=async(t=!0)=>{let r=[...u];if(i.product&&i.quantity!==0){const a=r.findIndex(n=>n.product_id===i.product.id&&n.price===i.price);a>-1?(r[a].quantity+=i.quantity,r[a].secondary_qty+=i.secondary_qty):r=[{product_id:i.product.id,product_name:i.product.name,unit:i.product.unit,secondary_unit:i.product.secondary_unit,multiplier:i.product.multiplier||1,price:i.price,cost_price:i.product.cost_price,quantity:i.quantity,secondary_qty:i.secondary_qty,is_combo:i.product.is_combo},...r]}if(r.length!==0){Be(!0);try{const a={partner_id:d?d.id:null,type:"Sale",payment_method:b,details:r.map(s=>({product_id:s.product_id,product_name:s.product_name,quantity:s.quantity,price:s.price})),note:K,amount_paid:O};let n;if(w?n=await q.put(`/api/orders/${w}`,a):n=await q.post("/api/orders",a),me(n.data),d)for(const s of u){const o=f[s.product_id];s.price!==o&&await q.post("/api/custom-prices",{partner_id:d.id,product_id:s.product_id,price:s.price})}t?setTimeout(()=>{window.print(),setTimeout(()=>{M(!1),le(),ce(),me(null)},1e3)},1e3):(M(!1),le(),ce(),Z({message:"ƒê√£ l∆∞u ƒë∆°n h√†ng th√†nh c√¥ng!",type:"success"}),me(null),localStorage.removeItem("pos_draft"))}catch(a){Z({message:a.response?.data?.error||"L·ªói khi l∆∞u ƒë∆°n h√†ng",type:"error"})}finally{Be(!1)}}},rt=()=>{if(u.length===0)return;const t={id:Date.now(),cart:[...u],partner:d,note:K,amountPaid:O,paymentMethod:b,total:_,time:new Date().toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),editOrderId:w};Ie([...z,t]),localStorage.removeItem("pos_draft"),M(),V(!0)},Et=t=>{y(t.cart),k(t.partner),X(t.note),j(t.amountPaid),L(t.paymentMethod||"Debt"),se(t.editOrderId||null),Ie(z.filter(r=>r.id!==t.id)),V(!1)},Ot=t=>{Ie(z.filter(r=>r.id!==t))},M=(t=!1)=>{y([]),t||(k(null),P("")),E(""),T(!1),j(0),X("");const r=N==="Wholesale"?"Pending":"Cash";L(r),r==="Cash"&&j(0),se(null),me(null),qe(0),setTimeout(()=>A.current?.focus(),100)},at=async t=>{let r;if(t==="prev"?r=W+1:r=Math.max(0,W-1),r===0){Ae()||M();return}try{Ze(!0);const a=await q.get(`/api/orders?type=Sale&limit=1&page=${r}`),n=a.data.items||a.data;if(n&&n.length>0){const s=n[0];await new Promise(l=>setTimeout(l,150)),se(s.id),y(s.details.map(l=>({product_id:l.product_id,product_name:l.product_name,unit:l.product_unit,secondary_unit:l.secondary_unit,multiplier:l.multiplier||1,price:l.price,cost_price:l.cost_price||0,quantity:l.quantity,secondary_qty:l.quantity/(l.multiplier||1),is_combo:l.is_combo,active_ingredient:l.active_ingredient}))),X(s.note||""),j(s.amount_paid||0),L(s.payment_method);const o=H.find(l=>l.id===s.partner_id);k(o||null),qe(r)}else t==="prev"?Z({message:"Kh√¥ng c√≤n ƒë∆°n h√†ng c≈© h∆°n.",type:"error"}):M()}catch(a){console.error(a),Z({message:"L·ªói khi t·∫£i l·ªãch s·ª≠ ƒë∆°n h√†ng",type:"error"})}finally{setTimeout(()=>Ze(!1),300)}},G=c.useMemo(()=>{const t=S.toLowerCase();return t?D.filter(r=>(r.name||"").toLowerCase().includes(t)||(r.code||"").toLowerCase().includes(t)||(r.active_ingredient||"").toLowerCase().includes(t)).sort((r,a)=>{const n=(r.name||"").toLowerCase(),s=(a.name||"").toLowerCase(),o=n.startsWith(t),l=s.startsWith(t);return o&&!l?-1:!o&&l?1:r.code?.toLowerCase()===t&&a.code?.toLowerCase()!==t?-1:r.code?.toLowerCase()!==t&&a.code?.toLowerCase()===t?1:n.localeCompare(s,"vi",{sensitivity:"base"})}).slice(0,10):D.slice(0,10)},[D,S]),pe=c.useMemo(()=>{const t=J.toLowerCase();return H.filter(r=>(r.name||"").toLowerCase().includes(t)||(r.phone||"").includes(t)).sort((r,a)=>{const n=(r.name||"").toLowerCase(),s=(a.name||"").toLowerCase(),o=n.startsWith(t),l=s.startsWith(t);return o&&!l?-1:!o&&l?1:n.localeCompare(s,"vi",{sensitivity:"base"})})},[H,J]);return e.jsxs("div",{className:"flex flex-col h-screen overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden no-print",children:[e.jsxs("div",{className:"p-4 flex gap-6 items-center print:hidden transition-colors relative border-primary/20 z-[80]",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute right-[-40px] top-[-40px] opacity-[0.03] dark:opacity-[0.06] -rotate-12 transition-all duration-1000",children:e.jsx(Me,{size:240,className:"text-primary"})}),e.jsx("div",{className:"absolute left-[-20px] bottom-[-20px] opacity-[0.02] dark:opacity-[0.04] rotate-45 transition-all duration-1000",children:e.jsx($e,{size:180,className:"text-[#4a7c59]"})})]}),e.jsxs("div",{className:"flex items-center gap-3 mr-4 relative z-10",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-primary to-emerald-600 rounded-2xl shadow-lg",children:e.jsx(Me,{size:28,className:"text-white",strokeWidth:2.5})}),e.jsxs("h1",{className:"text-2xl font-black text-primary dark:text-[#d4a574] uppercase tracking-tighter flex items-center gap-2",children:["V·ª• m√πa s·ªë",e.jsxs("span",{className:"text-sm font-bold px-3 py-1 bg-gradient-to-r from-[#d4a574]/20 to-[#f4c430]/20 text-muted dark:text-[#d4a574] rounded-xl border border-primary/30",children:["#",w||"M·ªöI"]})]}),e.jsxs("button",{onClick:()=>{const t={display_id:w?`ƒê∆°n #${w}`:"XEM TR∆Ø·ªöC",date:new Date().toISOString(),partner_name:d?d.name:"Kh√°ch L·∫ª",partner_address:d?d.address:"",partner_phone:d?d.phone:"",total_amount:_,amount_paid:O,payment_method:b,note:K,old_debt:ve,details:u.map(r=>({...r}))};vt(t),ie(!0)},className:"flex items-center gap-2 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm text-muted hover:text-primary hover:bg-[#d4a574]/20 dark:hover:bg-[#4a7c59]/20 px-4 py-2 rounded-xl border-2 border-[#d4a574]/30 transition-all font-black text-[10px] uppercase tracking-widest shadow-sm hover:shadow-md",children:[e.jsx(pt,{size:16})," Xem tr∆∞·ªõc in"]})]}),e.jsxs("div",{className:"flex-1 flex gap-4 relative z-10",children:[e.jsxs("div",{className:"w-80 relative z-50",onBlur:()=>setTimeout(()=>T(!1),200),children:[e.jsxs("div",{className:"relative cursor-pointer",onDoubleClick:t=>{t.preventDefault(),d&&(Je(d),Re(!0))},children:[e.jsx($e,{className:"absolute left-3 top-3 text-primary",size:18,strokeWidth:2.5}),e.jsx("input",{type:"text",className:"w-full pl-10 p-2.5 border-2 border-primary/30 dark:border-slate-800 rounded-xl focus:border-primary dark:focus:border-primary outline-none font-bold text-primary dark:text-gray-200 bg-white/90 dark:bg-slate-950/90 backdrop-blur-sm cursor-pointer transition-all shadow-sm focus:shadow-md",placeholder:"üîç T√¨m ki·∫øm ƒë·ªëi t√°c...",value:d?d.name:J,onDoubleClick:t=>{d&&(t.stopPropagation(),Je(d),Re(!0))},onChange:t=>{P(t.target.value),d&&k(null),T(!0)},onKeyDown:t=>{if(t.key==="ArrowDown")t.preventDefault(),Y(r=>{const a=Math.min(r+1,pe.length),n=Oe.current;if(n){const s=n.children[a];s&&s.scrollIntoView({block:"nearest"})}return a});else if(t.key==="ArrowUp")t.preventDefault(),Y(r=>{const a=Math.max(r-1,0),n=Oe.current;if(n){const s=n.children[a];s&&s.scrollIntoView({block:"nearest"})}return a});else if(t.key==="Enter"){if(t.preventDefault(),x===0)k(null),P(""),T(!1);else if(pe[x-1]){const r=pe[x-1];k(r),P(""),T(!1)}}}}),d&&e.jsx("button",{onClick:()=>{k(null),P("")},className:"absolute right-3 top-3 text-muted hover:text-red-500 transition-colors",children:e.jsx(He,{size:16})})]}),e.jsx($,{children:Ce&&!d&&e.jsxs(h.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"dropdown-premium min-w-[320px] !z-[200]",ref:Oe,children:[e.jsxs("div",{className:p("dropdown-item flex items-center gap-3",x===0&&"active"),onClick:()=>{k(null),P(""),T(!1)},children:[e.jsx("div",{className:p("w-8 h-8 rounded-full flex items-center justify-center transition-colors",x===0?"bg-white/20 text-white":"bg-gray-100 dark:bg-slate-800 text-gray-500"),children:e.jsx(ut,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:p("font-black uppercase tracking-tight",x===0?"text-white":"text-gray-800 dark:text-gray-100"),children:"Kh√°ch l·∫ª"}),e.jsx("div",{className:p("text-[10px] font-bold",x===0?"text-white/70":"text-gray-400"),children:"Thanh to√°n ngay"})]})]}),e.jsx("div",{className:"max-h-[350px] overflow-y-auto no-scrollbar scroll-smooth",children:pe.map((t,r)=>e.jsxs("div",{onClick:()=>{k(t),P(""),T(!1)},className:p("dropdown-item flex justify-between items-center",x===r+1&&"active"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:p("w-8 h-8 rounded-full flex items-center justify-center transition-colors",x===r+1?"bg-white/20 text-white":"bg-primary/10 text-primary"),children:e.jsx(ut,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:p("font-black uppercase tracking-tight",x===r+1?"text-white":"text-gray-800 dark:text-gray-100"),children:t.name}),e.jsxs("div",{className:p("text-[10px] font-bold flex items-center gap-2",x===r+1?"text-white/70":"text-gray-400"),children:[e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(mt,{size:10,strokeWidth:3})," ",t.phone||"N/A"]}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-current opacity-30"}),e.jsx("span",{className:"flex items-center gap-0.5 uppercase tracking-tighter",children:t.is_customer&&t.is_supplier?"KH & NCC":t.is_customer?"Kh√°ch h√†ng":"Nh√† CC"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:p("text-[10px] font-black uppercase opacity-60 mb-0.5",x===r+1?"text-white/60":"text-gray-400"),children:"D∆∞ n·ª£"}),e.jsx("div",{className:p("font-black text-sm",x===r+1?"text-white":"text-red-500"),children:Rt(t.debt_balance)})]})]},t.id))}),J&&pe.length===0&&e.jsxs("div",{className:"p-4 bg-primary text-white cursor-pointer font-black uppercase text-xs flex items-center gap-2 hover:brightness-110 transition-all",onClick:()=>{Ve(J),he(!0),T(!1)},children:[e.jsx(Fe,{size:18,strokeWidth:3}),' Th√™m kh√°ch h√†ng m·ªõi: "',J,'"']})]})})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(h.button,{whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},onClick:()=>V(!0),className:"relative p-2.5 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm text-muted dark:text-gray-400 rounded-xl hover:bg-[#d4a574]/20 dark:hover:bg-slate-700 transition-all font-bold flex items-center gap-2 border-2 border-[#d4a574]/20 shadow-sm hover:shadow-md",title:"H√≥a ƒë∆°n ch·ªù",children:[e.jsx(Ne,{size:20}),z.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-br from-[#f4c430] to-[#d4a574] text-white text-[10px] w-5 h-5 rounded-full flex items-center justify-center font-black shadow-lg",children:z.length}),e.jsx("span",{className:"hidden lg:inline text-xs uppercase",children:"Hƒê Ch·ªù"})]}),e.jsxs("div",{className:"flex bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-xl overflow-hidden shadow-sm border-2 border-[#d4a574]/20",children:[e.jsx(h.button,{whileTap:{scale:.9},onClick:()=>at("prev"),className:"p-2.5 text-muted dark:text-gray-400 hover:bg-[#d4a574]/20 dark:hover:bg-slate-700 transition-all border-r border-[#d4a574]/20 dark:border-slate-700",title:"ƒê∆°n tr∆∞·ªõc",children:e.jsx($t,{size:20})}),e.jsxs(h.button,{whileTap:{scale:.95},onClick:()=>{W!==0&&(Ae()||M())},className:"px-3 flex flex-col items-center justify-center min-w-[70px] hover:bg-[#d4a574]/20 dark:hover:bg-slate-700 transition-colors",title:"Quay v·ªÅ ƒë∆°n m·ªõi",children:[e.jsx("span",{className:p("text-[10px] font-black uppercase tracking-tighter",W===0?"text-primary dark:text-[#4a7c59]":"text-[#f4c430]"),children:W===0?"M·ªõi":`#${W}`}),W!==0&&e.jsx("span",{className:"text-[8px] font-bold text-muted dark:text-gray-400 uppercase leading-none",children:"V·ªÅ M·ªõi"})]}),e.jsx(h.button,{whileTap:{scale:.9},onClick:()=>at("next"),disabled:W===0,className:p("p-2.5 text-muted dark:text-gray-400 hover:bg-[#d4a574]/20 dark:hover:bg-slate-700 transition-all border-l border-[#d4a574]/20 dark:border-slate-700",W===0&&"opacity-30 cursor-not-allowed"),title:"ƒê∆°n sau",children:e.jsx(Ht,{size:20})})]}),e.jsxs(h.button,{whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},onClick:M,className:"p-2.5 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm text-muted dark:text-gray-400 rounded-xl hover:bg-[#d4a574]/20 dark:hover:bg-slate-700 transition-all font-bold flex items-center gap-2 border-2 border-[#d4a574]/20 shadow-sm hover:shadow-md",title:"ƒê∆°n m·ªõi",children:[e.jsx(_e,{size:20}),e.jsx("span",{className:"hidden lg:inline text-xs uppercase",children:"ƒê∆°n m·ªõi"})]}),e.jsxs(h.button,{whileTap:{scale:.95},onClick:()=>Pt(N==="Retail"?"Wholesale":"Retail"),className:p("px-4 py-2.5 rounded-xl font-black text-xs uppercase tracking-wider flex items-center gap-2 transition-all cursor-pointer select-none shadow-sm hover:shadow-md border-2",N==="Wholesale"?"bg-gradient-to-r from-[#f4c430]/20 to-[#d4a574]/20 text-muted border-[#d4a574]/30 hover:from-[#f4c430]/30 hover:to-[#d4a574]/30":"bg-gradient-to-r from-primary/20 to-primary-hover/20 text-primary dark:text-[#4a7c59] border-[#4a7c59]/30 hover:from-primary/30 hover:to-primary-hover/30"),children:[e.jsx("div",{className:p("w-2 h-2 rounded-full",N==="Wholesale"?"bg-amber-500":"bg-emerald-500")}),N==="Wholesale"?"S·ªà":"L·∫∫"]})]}),e.jsx("div",{className:"flex-1 flex justify-end items-center mr-2",children:e.jsxs("div",{className:"flex flex-col items-end opacity-80 hover:opacity-100 transition-opacity select-none",children:[e.jsx("div",{className:"text-2xl font-black text-primary dark:text-[#d4a574] tracking-tighter leading-none flex items-center gap-2 tabular-nums",children:Ye.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"text-[10px] font-bold text-muted dark:text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[e.jsx(Ft,{size:10,strokeWidth:2.5}),e.jsx("span",{children:Ye.toLocaleDateString("vi-VN",{weekday:"short",day:"2-digit",month:"2-digit",year:"numeric"})})]})]})})]})]}),e.jsx($,{children:De&&e.jsx(nt,{children:e.jsxs("div",{className:"fixed inset-0 z-[2000] flex justify-end font-sans",children:[e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-[2px]",onClick:()=>V(!1)}),e.jsxs(h.div,{initial:{x:"100%",opacity:.5},animate:{x:0,opacity:1},exit:{x:"100%",opacity:.5},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:"relative w-[340px] md:w-[400px] bg-white dark:bg-slate-900 shadow-2xl h-full flex flex-col p-8 border-l border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-gray-800 dark:text-gray-100 uppercase tracking-tighter flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-xl",children:e.jsx(Ne,{className:"text-amber-600 dark:text-amber-400",size:24})}),"H√≥a ƒë∆°n ch·ªù"]}),e.jsxs("p",{className:"text-[10px] font-black text-amber-600/60 uppercase tracking-[0.2em] mt-1 ml-1",children:["ƒêang treo (",z.length,")"]})]}),e.jsx("button",{onClick:()=>V(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full transition-all hover:rotate-90",children:e.jsx(He,{size:24,className:"text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-auto space-y-4 pr-2 no-scrollbar",children:z.length===0?e.jsxs("div",{className:"text-center py-32 text-gray-300 dark:text-slate-700",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx(Ne,{size:64,className:"opacity-20 mx-auto"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white dark:from-slate-900 to-transparent"})]}),e.jsx("p",{className:"font-black uppercase text-xs tracking-widest",children:"Tr·ªëng tr·∫£i..."})]}):e.jsx($,{mode:"popLayout",children:z.map((t,r)=>e.jsxs(h.div,{layout:!0,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9,x:20},transition:{delay:r*.05,type:"spring",stiffness:400,damping:30},className:"bg-white dark:bg-slate-800/40 border-2 border-amber-50 dark:border-amber-900/10 rounded-[2rem] p-5 hover:border-amber-200 dark:hover:border-amber-600/30 transition-all group shadow-sm hover:shadow-xl hover:-translate-y-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-black text-gray-800 dark:text-gray-100 uppercase text-sm leading-tight group-hover:text-amber-600 transition-colors",children:t.partner?t.partner.name:"KH√ÅCH B√ÅN L·∫∫"}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxs("div",{className:"text-[10px] font-black text-gray-400 bg-gray-50 dark:bg-slate-900 px-2 py-0.5 rounded-full uppercase tabular-nums",children:["üïí ",t.time]}),e.jsxs("div",{className:"text-[10px] font-black text-amber-600/70 bg-amber-50 dark:bg-amber-900/20 px-2 py-0.5 rounded-full uppercase",children:[t.cart.length," m√≥n"]})]})]}),e.jsx("button",{onClick:()=>Ot(t.id),className:"text-gray-300 hover:text-rose-500 transition-colors p-1.5 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg",children:e.jsx(xt,{size:18})})]}),e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-slate-900/50 p-3 rounded-2xl border border-dashed border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] font-black text-gray-400 uppercase leading-none mb-1",children:"T·ªïng c·ªông"}),e.jsx("div",{className:"text-amber-600 dark:text-amber-400 font-black text-xl tracking-tighter",children:I(t.total)})]}),e.jsxs(h.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Et(t),className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white px-5 py-2 rounded-xl font-black text-[11px] uppercase flex items-center gap-2 shadow-lg shadow-amber-500/30 hover:shadow-amber-500/50 transition-all",children:[e.jsx(_e,{size:14,strokeWidth:3}),"THU H·ªíI"]})]})]},t.id))})}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-slate-800",children:e.jsx("button",{onClick:()=>V(!1),className:"w-full py-4 rounded-2xl border-2 border-gray-200 dark:border-slate-800 text-gray-500 font-black uppercase text-xs hover:bg-gray-50 dark:hover:bg-slate-800 transition-all tracking-widest",children:"ƒê√≥ng sidebar"})})]})]})})}),e.jsx("div",{className:"flex-1 p-4 pb-2 pt-2 print:hidden min-h-0",children:e.jsxs("div",{className:"w-full h-full rounded-[2.5rem] border-2 border-primary/30 shadow-2xl overflow-hidden relative h-full main-content-bg",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:`repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(139, 111, 71, 0.1) 10px, rgba(139, 111, 71, 0.1) 20px),
                                            radial-gradient(circle at 3px 3px, rgba(45, 80, 22, 0.08) 1px, transparent 0)`,backgroundSize:"40px 40px, 30px 30px",backgroundPosition:"0 0, 15px 15px"}}),e.jsx("div",{className:"absolute inset-0 overflow-auto",children:e.jsxs("div",{className:"min-w-[1000px] transition-colors relative group/decoration min-h-full",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-[2.5rem] pointer-events-none",children:[e.jsx("div",{className:"absolute right-[-100px] bottom-[-100px] opacity-[0.02] dark:opacity-[0.04] group-hover/decoration:scale-110 transition-transform duration-[2000ms] text-[#4a7c59]",children:e.jsx(ht,{size:600})}),e.jsx("div",{className:"absolute left-[-50px] top-[-50px] opacity-[0.015] dark:opacity-[0.03] group-hover/decoration:rotate-12 transition-transform duration-[3000ms] text-muted",children:e.jsx(Me,{size:400})})]}),e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gradient-to-r from-primary/10 via-primary-hover/8 to-primary/10 border-b-2 border-[#d4a574]/40 text-primary dark:text-[#d4a574] uppercase text-[11px] font-black tracking-wider transition-colors sticky top-0 z-[40] shadow-md backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 w-12 text-center",children:"Stt"}),e.jsx("th",{className:"p-4",children:"T√™n S·∫£n Ph·∫©m"}),e.jsx("th",{className:"p-4 w-24 text-center",children:"ƒêVT"}),e.jsx("th",{className:"p-4 w-32 text-center",children:"SL Quy ƒë·ªïi"}),e.jsx("th",{className:"p-4 w-24 text-center text-primary dark:text-[#d4a574]",children:"S·ªë l∆∞·ª£ng"}),e.jsx("th",{className:"p-4 w-32 text-right",children:"ƒê∆°n gi√°"}),e.jsx("th",{className:"p-4 w-32 text-right",children:"Th√†nh ti·ªÅn"}),e.jsx("th",{className:"p-4 w-24 text-center text-sm",children:"T·ªìn"}),e.jsx("th",{className:"p-4 w-12"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:[e.jsxs("tr",{className:"bg-gradient-to-r from-[#faf8f3]/60 via-white/40 to-[#faf8f3]/60 dark:bg-slate-900/40 print:hidden border-b-2 border-[#d4a574]/30 sticky top-[52px] z-[65] backdrop-blur-md cursor-pointer shadow-sm",onDoubleClick:()=>{i.product&&(ye(i.product),re(!0))},children:[e.jsx("td",{className:"p-4 text-center",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:e.jsx(Fe,{className:"text-primary",size:18})})}),e.jsx("td",{className:"p-2 relative",children:e.jsxs("div",{className:"relative group/search",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 z-10 text-gray-400",children:e.jsx(Bt,{size:20})}),e.jsx("input",{type:"text",placeholder:"T√™n s·∫£n ph·∫©m (F2)...",className:"w-full p-2.5 pl-12 bg-white/80 dark:bg-slate-800 border-2 border-[#d4a574]/20 focus:border-primary dark:focus:border-[#4a7c59] focus:bg-white rounded-xl font-black text-gray-800 dark:text-gray-100 uppercase outline-none transition-all shadow-sm",autoComplete:"off",value:S,onChange:t=>{const r=t.target.value;E(r),Y(0),i.product&&r!==i.name&&R({...i,product:null,name:r})},onKeyDown:t=>{if(t.key==="ArrowUp")t.preventDefault(),Y(r=>{const a=Math.max(r-1,0),n=We.current;if(n){const s=n.children[a];s&&s.scrollIntoView({block:"nearest"})}return a});else if(t.key==="ArrowDown")t.preventDefault(),Y(r=>{const a=Math.min(r+1,G.length-1),n=We.current;if(n){const s=n.children[a];s&&s.scrollIntoView({block:"nearest"})}return a});else if(t.key==="Enter"){if(t.preventDefault(),S&&G[x]){const r=G[x],a=i.quantity!==0?i.quantity:1;R({product:r,quantity:a,price:f[r.id]!==void 0?f[r.id]:r.sale_price,secondary_qty:a/(r.multiplier||1),name:r.name}),E(r.name),we(r,1,f[r.id]!==void 0?f[r.id]:r.sale_price)}}else if(t.key==="Tab"){if(i.product){t.preventDefault();const r=N==="Wholesale"&&i.product.secondary_unit?ke:Q;setTimeout(()=>{r.current?.focus(),r.current?.select()},10)}else if(S&&G[x]){t.preventDefault();const r=G[x],a=i.quantity!==0?i.quantity:1;R({product:r,quantity:a,price:f[r.id]!==void 0?f[r.id]:r.sale_price,secondary_qty:a/(r.multiplier||1),name:r.name}),E(r.name);const n=N==="Wholesale"&&r.secondary_unit?ke:Q;setTimeout(()=>{n.current?.focus(),n.current?.select()},10)}}},ref:A}),e.jsx($,{children:S&&!i.product&&e.jsxs(h.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"dropdown-premium min-w-[500px] !z-[150]",children:[e.jsx("div",{className:"max-h-[400px] overflow-y-auto no-scrollbar scroll-smooth",ref:We,children:G.map((t,r)=>e.jsxs("div",{onClick:()=>{const a=i.quantity!==0?i.quantity:1;R({product:t,quantity:a,price:f[t.id]!==void 0?f[t.id]:t.sale_price,secondary_qty:a/(t.multiplier||1),name:t.name}),E(t.name),E(t.name);const n=N==="Wholesale"&&t.secondary_unit?ke:Q;setTimeout(()=>{n.current?.focus(),n.current?.select()},10)},className:p("dropdown-item flex justify-between items-center",r===x&&"active"),children:[e.jsxs("div",{children:[e.jsx("div",{className:p("font-black uppercase tracking-tight",r===x?"text-white":"text-gray-800 dark:text-gray-100"),children:t.name}),e.jsx("div",{className:p("text-[10px] font-bold italic mb-0.5",r===x?"text-white/80":"text-primary dark:text-emerald-400"),children:t.active_ingredient}),e.jsx("div",{className:p("text-[10px] uppercase font-black flex items-center gap-2",r===x?"text-white/70":"text-gray-500"),children:t.is_combo?e.jsx("span",{className:"bg-primary text-white px-1.5 rounded text-[9px]",children:"COMBO"}):e.jsxs(e.Fragment,{children:[t.unit," ",t.multiplier>1&&`/ ${t.secondary_unit} (x${t.multiplier})`," - ",t.stock," T·ªíN"]})})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:p("font-black text-lg tracking-tighter",r===x?"text-white":"text-primary dark:text-emerald-400"),children:I(t.sale_price)})})]},t.id))}),S&&G.length===0&&e.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-primary hover:text-white cursor-pointer text-primary dark:text-emerald-400 font-black uppercase text-xs flex items-center gap-2",onClick:()=>{Ve(S),ge(!0)},children:[e.jsx(Fe,{size:16}),' Th√™m s·∫£n ph·∫©m m·ªõi: "',S,'"']})]})})]})}),e.jsxs("td",{className:"p-4 text-center",children:[e.jsx("div",{className:"font-bold text-gray-700 dark:text-gray-200 text-xs",children:i.product?.unit||"-"}),i.product?.secondary_unit&&e.jsxs("div",{className:"text-[10px] text-primary dark:text-[#d4a574] font-black uppercase tracking-tighter",children:["1 ",i.product.secondary_unit," = ",i.product.multiplier," ",i.product.unit]})]}),e.jsx("td",{className:"p-2 w-32",children:i.product?.secondary_unit?e.jsxs("div",{className:"flex items-center gap-2 bg-primary/5 dark:bg-slate-800 p-1.5 rounded-xl border border-transparent focus-within:border-primary/30 transition-all",children:[e.jsx("input",{type:"number",className:"w-full bg-transparent text-center font-black text-gray-800 dark:text-white outline-none",id:"working-sec-qty",ref:ke,value:i.secondary_qty,autoComplete:"off",onFocus:t=>t.target.select(),onChange:t=>{const r=parseFloat(t.target.value)||0;R(a=>{const n=parseFloat(a.product?.multiplier)||1;return{...a,secondary_qty:r,quantity:r*n}})},onKeyDown:t=>{t.key==="Tab"?(t.preventDefault(),Q.current?.focus()):t.key==="Enter"&&(t.preventDefault(),i.product&&i.quantity!==0&&we(i.product,i.quantity,i.price))}}),e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase pr-2",children:i.product.secondary_unit})]}):e.jsx("div",{className:"text-center text-gray-300 italic text-[10px] font-bold h-[38px] flex items-center justify-center",children:"N/A"})}),e.jsx("td",{className:"p-2 w-24 group/qty",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"number",className:"w-full p-2 text-center bg-primary/5 dark:bg-slate-800 border border-[#d4a574]/20 rounded focus:border-primary dark:focus:border-[#4a7c59] outline-none font-black text-lg text-primary dark:text-[#d4a574]",value:i.quantity,id:"working-main-qty",ref:Q,autoComplete:"off",onFocus:t=>t.target.select(),onChange:t=>{const r=parseFloat(t.target.value)||0;R(a=>{const n=parseFloat(a.product?.multiplier)||1;return{...a,quantity:r,secondary_qty:r/n}})},onKeyDown:t=>{t.key==="Tab"?(t.preventDefault(),Ee.current?.focus()):t.key==="Enter"&&(t.preventDefault(),i.product&&i.quantity!==0&&we(i.product,i.quantity,i.price))}}),e.jsx("button",{tabIndex:-1,className:"absolute -top-2 -right-2 w-5 h-5 flex items-center justify-center bg-[#8b6f47] text-white rounded-full shadow-md hover:bg-[#8b6f47]/90 active:scale-95 z-[70] transition-transform hover:scale-110 border border-white dark:border-slate-800",onClick:()=>{R(t=>({...t,quantity:t.quantity*-1,secondary_qty:t.secondary_qty*-1})),Q.current?.focus()},title:"ƒê·ªïi th√†nh Tr·∫£ H√†ng (√Çm)",children:e.jsx(_e,{size:10,strokeWidth:3})})]})}),e.jsx("td",{className:"p-2 text-right",children:e.jsxs("div",{className:"relative group/price",children:[e.jsx("input",{type:"text",className:p("w-full p-2 text-right bg-transparent border-none focus:ring-2 rounded font-bold transition-all outline-none",i.product&&i.price<i.product.cost_price?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 focus:ring-red-200 dark:focus:ring-red-900":"text-primary dark:text-[#d4a574] focus:ring-primary/20 dark:focus:ring-[#4a7c59]/20"),value:I(i.price),id:"working-price",ref:Ee,autoComplete:"off",onFocus:t=>t.target.select(),onChange:t=>{const r=parseFloat(t.target.value.replace(/,/g,""))||0;R({...i,price:r})},onKeyDown:t=>{t.key==="Enter"?(t.preventDefault(),i.product&&i.quantity!==0&&we(i.product,i.quantity,i.price)):t.key==="Tab"&&!t.shiftKey&&(t.preventDefault(),A.current?.focus())}}),i.product&&i.price<i.product.cost_price&&e.jsxs("div",{className:"absolute top-full right-0 bg-red-600 text-white text-sm px-4 py-2 rounded-xl font-black whitespace-nowrap z-[1001] flex items-center gap-2 shadow-2xl animate-bounce pointer-events-none uppercase tracking-tighter border-2 border-white dark:border-red-900 shadow-red-500/50 mt-2",children:[e.jsx(ft,{size:18,fill:"white",className:"text-red-600"}),"L·ªñ V·ªêN (G·ªêC: ",it(i.product.cost_price),")"]})]})}),e.jsxs("td",{className:"p-4 text-right",children:[e.jsx("div",{className:p("font-black text-lg transition-colors",i.quantity<0?"text-red-600 dark:text-red-400":"text-primary dark:text-[#d4a574]"),children:I(i.price*i.quantity)}),i.quantity<0&&e.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded text-[9px] font-black uppercase tracking-widest border border-red-200 dark:border-red-800/50 mt-1",children:"H√†ng tr·∫£"})]}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:"text-sm font-black text-gray-400",children:i.product?.stock||"-"})}),e.jsx("td",{className:"p-4"})]}),e.jsx($,{initial:!1,mode:"wait",children:qt?e.jsx(h.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full",children:e.jsx("td",{colSpan:9,className:"h-[400px] text-center relative align-middle",children:e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full"}),e.jsx(Kt,{size:48,className:"animate-spin text-primary relative z-10"})]}),e.jsx("span",{className:"text-sm font-black text-muted dark:text-[#d4a574] uppercase tracking-widest",children:"ƒêang ƒë·ªìng b·ªô d·ªØ li·ªáu..."})]})})},"loading-skeleton"):u.map((t,r)=>e.jsxs(h.tr,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:50,scale:.95,transition:{duration:.2,ease:"easeIn"}},transition:{duration:.3,type:"spring",stiffness:300,damping:25,delay:r*.02},className:p("transition-colors group cursor-pointer border-b border-dashed border-gray-100 dark:border-slate-800 last:border-0",r%2===0?"bg-white/30 hover:bg-[#d4a574]/10":"bg-[#faf8f3]/20 hover:bg-[#d4a574]/15"),onDoubleClick:()=>{const a=D.find(n=>n.id===t.product_id);a&&(ye(a),re(!0))},children:[e.jsx("td",{className:"p-4 text-center text-gray-400 font-bold group-hover:text-primary dark:group-hover:text-[#d4a574] transition-colors",children:u.length-r}),e.jsx("td",{className:"p-2 relative",children:e.jsxs("div",{className:"relative group/search-row",onDoubleClick:a=>{a.preventDefault();const n=D.find(s=>s.id===t.product_id);n&&(ye(n),re(!0))},children:[e.jsx("input",{className:"w-full p-2 bg-transparent border-none focus:ring-2 focus:ring-primary/20 dark:focus:ring-[#4a7c59]/20 rounded font-bold text-gray-800 dark:text-gray-100 uppercase outline-none",autoComplete:"off",value:ee===r?te:t.product_name,onFocus:a=>{B(r),Qe(t.product_name),be(0),a.target.select()},onChange:a=>{Qe(a.target.value),be(0)},onBlur:()=>{setTimeout(()=>{B(a=>a===r?null:a)},200)},onDoubleClick:()=>{const a=D.find(n=>n.id===t.product_id);a&&(ye(a),re(!0))},onKeyDown:a=>{const n=D.filter(s=>{const o=te.toLowerCase();return(s.name||"").toLowerCase().includes(o)||(s.code||"").toLowerCase().includes(o)||(s.active_ingredient||"").toLowerCase().includes(o)}).sort((s,o)=>{const l=te.toLowerCase(),m=(s.name||"").toLowerCase(),g=(o.name||"").toLowerCase(),v=m.startsWith(l),C=g.startsWith(l);return v&&!C?-1:!v&&C?1:s.code?.toLowerCase()===l&&o.code?.toLowerCase()!==l?-1:s.code?.toLowerCase()!==l&&o.code?.toLowerCase()===l?1:m.localeCompare(g,"vi",{sensitivity:"base"})}).slice(0,10);if(a.key==="ArrowDown")if(ee===r&&n.length>0)a.preventDefault(),be(s=>{const o=Math.min(s+1,n.length-1);if(oe.current){const l=oe.current.children[o];l&&l.scrollIntoView({block:"nearest"})}return o});else{a.preventDefault();const s=r+1;s<u.length&&document.getElementById(`row-name-${s}`)?.focus()}else if(a.key==="ArrowUp")if(ee===r&&n.length>0)a.preventDefault(),be(s=>{const o=Math.max(s-1,0);if(oe.current){const l=oe.current.children[o];l&&l.scrollIntoView({block:"nearest"})}return o});else{a.preventDefault();const s=r-1;s>=0?document.getElementById(`row-name-${s}`)?.focus():A.current?.focus()}else if(a.key==="Enter"){if(a.preventDefault(),n[ne]){const s=n[ne];let o=[...u];const l=o[r].quantity,m=o.findIndex((g,v)=>v!==r&&g.product_id===s.id);m>-1?(o[m].quantity+=l,o[m].secondary_qty=o[m].quantity/(o[m].multiplier||1),o.splice(r,1)):o[r]={...o[r],product_id:s.id,product_name:s.name,unit:s.unit,secondary_unit:s.secondary_unit,multiplier:s.multiplier||1,price:f[s.id]!==void 0?f[s.id]:s.sale_price,cost_price:s.cost_price,stock:s.stock,is_combo:s.is_combo,secondary_qty:l/(s.multiplier||1),active_ingredient:s.active_ingredient},y(o),B(null)}A.current?.focus()}else if(a.key==="Tab"){a.preventDefault();const s=n.length>0?n:[];if(s[ne]){const o=s[ne];let l=[...u];const m=l[r].quantity,g=l.findIndex((v,C)=>C!==r&&v.product_id===o.id);g>-1?(l[g].quantity+=m,l[g].secondary_qty=l[g].quantity/(l[g].multiplier||1),l.splice(r,1),y(l),B(null),setTimeout(()=>{const v=g>r?g-1:g,C=document.getElementById(`qty-sec-${v}`);if(N==="Wholesale"&&C&&!C.disabled)C.focus(),C.select?.();else{const st=document.getElementById(`qty-main-${v}`);st?.focus(),st?.select?.()}},200)):(l[r]={...l[r],product_id:o.id,product_name:o.name,unit:o.unit,secondary_unit:o.secondary_unit,multiplier:o.multiplier||1,price:f[o.id]!==void 0?f[o.id]:o.sale_price,cost_price:o.cost_price,stock:o.stock,is_combo:o.is_combo,secondary_qty:m/(o.multiplier||1),active_ingredient:o.active_ingredient},y(l),B(null),setTimeout(()=>{const v=document.getElementById(`qty-sec-${r}`);if(N==="Wholesale"&&v&&!v.disabled)v.focus(),v.select?.();else{const C=document.getElementById(`qty-main-${r}`);C?.focus(),C?.select?.()}},200))}else B(null),setTimeout(()=>{const o=document.getElementById(`qty-sec-${r}`);if(N==="Wholesale"&&o&&!o.disabled)o.focus(),o.select?.();else{const l=document.getElementById(`qty-main-${r}`);l?.focus(),l?.select?.()}},200)}},id:`row-name-${r}`}),ee===r&&te&&e.jsx("div",{className:"dropdown-premium min-w-[400px] mt-2",children:e.jsx("div",{ref:oe,className:"max-h-64 overflow-y-auto no-scrollbar",children:D.filter(a=>{const n=te.toLowerCase();return(a.name||"").toLowerCase().includes(n)||(a.code||"").toLowerCase().includes(n)||(a.active_ingredient||"").toLowerCase().includes(n)}).sort((a,n)=>{const s=te.toLowerCase(),o=(a.name||"").toLowerCase(),l=(n.name||"").toLowerCase(),m=o.startsWith(s),g=l.startsWith(s);return m&&!g?-1:!m&&g?1:a.code?.toLowerCase()===s&&n.code?.toLowerCase()!==s?-1:a.code?.toLowerCase()!==s&&n.code?.toLowerCase()===s?1:o.localeCompare(l,"vi",{sensitivity:"base"})}).slice(0,10).map((a,n)=>e.jsxs("div",{onClick:()=>{let s=[...u];const o=s[r].quantity,l=s.findIndex((m,g)=>g!==r&&m.product_id===a.id);l>-1?(s[l].quantity+=o,s[l].secondary_qty=s[l].quantity/(s[l].multiplier||1),s.splice(r,1)):s[r]={...s[r],product_id:a.id,product_name:a.name,unit:a.unit,secondary_unit:a.secondary_unit,multiplier:a.multiplier||1,price:f[a.id]!==void 0?f[a.id]:a.sale_price,cost_price:a.cost_price,stock:a.stock,is_combo:a.is_combo,secondary_qty:o/(a.multiplier||1),active_ingredient:a.active_ingredient},y(s),B(null)},className:p("dropdown-item flex justify-between items-center",n===ne&&"active"),children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-gray-800 dark:text-gray-100 uppercase tracking-tight",children:a.name}),e.jsxs("div",{className:"text-[11px] text-gray-500 uppercase font-black flex items-center gap-2",children:[e.jsx("span",{children:a.unit}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),e.jsxs("span",{className:"text-primary dark:text-[#d4a574]",children:[a.stock," T·ªíN"]})]})]}),e.jsx("div",{className:"text-right font-black text-primary dark:text-[#d4a574]",children:I(a.sale_price)})]},a.id))})}),t.is_combo&&e.jsx("span",{className:"ml-2 bg-primary/10 text-primary dark:text-[#d4a574] text-[9px] px-1.5 py-0.5 rounded font-black uppercase",children:"Combo"}),t.active_ingredient&&e.jsxs("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover/search-row:block z-[2000] w-64 bg-slate-800 text-white p-3 rounded-xl shadow-2xl animate-in fade-in slide-in-from-bottom-2 duration-200 border border-slate-700",children:[e.jsx("div",{className:"text-[10px] font-black uppercase text-[#d4a574] mb-1 tracking-widest border-b border-white/10 pb-1",children:"Ho·∫°t ch·∫•t / Th√†nh ph·∫ßn"}),e.jsx("div",{className:"text-xs font-bold leading-relaxed",children:t.active_ingredient})]})]})}),e.jsxs("td",{className:"p-4 text-center",children:[e.jsx("div",{className:"font-bold text-gray-700 dark:text-gray-200",children:t.unit}),t.secondary_unit&&e.jsxs("div",{className:"text-[10px] text-primary dark:text-[#d4a574] font-black uppercase tracking-tighter",children:["1 ",t.secondary_unit," = ",t.multiplier," ",t.unit]})]}),e.jsx("td",{className:"p-2 w-32",children:t.secondary_unit?e.jsxs("div",{className:"flex items-center gap-2 bg-primary/5 dark:bg-slate-800 p-1.5 rounded-xl border border-transparent focus-within:border-primary/30 transition-all",children:[e.jsx("input",{type:"number",className:"w-full bg-transparent text-center font-black text-gray-800 dark:text-white outline-none",value:t.secondary_qty,onFocus:a=>a.target.select(),autoComplete:"off",onChange:a=>je(r,"secondary_qty",parseFloat(a.target.value)||0),onKeyDown:a=>{if(a.key==="ArrowDown"){a.preventDefault();const n=r+1;n<u.length&&document.getElementById(`qty-sec-${n}`)?.focus()}else if(a.key==="ArrowUp"){a.preventDefault();const n=r-1;n>=0&&document.getElementById(`qty-sec-${n}`)?.focus()}},id:`qty-sec-${r}`}),e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase pr-2",children:t.secondary_unit})]}):e.jsx("div",{className:"text-center text-gray-300 italic text-[10px] font-bold",children:"N/A"})}),e.jsx("td",{className:"p-2 w-24 group/qty",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"number",className:"w-full p-2 text-center bg-primary/5 dark:bg-slate-800 border border-[#d4a574]/20 rounded focus:border-primary dark:focus:border-[#4a7c59] outline-none font-black text-lg text-primary dark:text-[#d4a574]",value:t.quantity,onFocus:a=>a.target.select(),autoComplete:"off",onChange:a=>je(r,"quantity",parseFloat(a.target.value)||0),ref:a=>jt.current[t.product_id]=a,id:`qty-main-${r}`,onKeyDown:a=>{if(a.key==="Enter")a.preventDefault(),A.current?.focus();else if(a.key==="Tab")a.preventDefault(),document.getElementById(`price-${r}`)?.focus();else if(a.key==="ArrowDown"){a.preventDefault();const n=r+1;n<u.length&&document.getElementById(`qty-main-${n}`)?.focus()}else if(a.key==="ArrowUp"){a.preventDefault();const n=r-1;n>=0?document.getElementById(`qty-main-${n}`)?.focus():Q.current?.focus()}}}),e.jsx("button",{tabIndex:-1,className:"absolute -top-2 -right-2 w-5 h-5 flex items-center justify-center bg-[#8b6f47] text-white rounded-full shadow-md hover:bg-[#8b6f47]/90 active:scale-95 z-[70] transition-transform hover:scale-110 border border-white dark:border-slate-800",onClick:()=>je(r,"quantity",t.quantity*-1),title:"ƒê·ªïi th√†nh Tr·∫£ H√†ng (√Çm)",children:e.jsx(_e,{size:10,strokeWidth:3})})]})}),e.jsx("td",{className:"p-2 text-right",children:e.jsxs("div",{className:"relative group/price",children:[e.jsx("input",{type:"text",className:p("w-full p-2 text-right bg-transparent border-none focus:ring-2 rounded font-bold transition-all outline-none",t.price<t.cost_price?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 focus:ring-red-200 dark:focus:ring-red-900":"text-primary dark:text-[#d4a574] focus:ring-primary/20 dark:focus:ring-[#4a7c59]/20"),value:I(t.price),onFocus:a=>a.target.select(),autoComplete:"off",onChange:a=>{const n=parseFloat(a.target.value.replace(/,/g,""))||0;je(r,"price",n)},onKeyDown:a=>{if(a.key==="Enter"||a.key==="Tab")a.preventDefault(),A.current?.focus();else if(a.key==="ArrowDown"){a.preventDefault();const n=r+1;n<u.length&&document.getElementById(`price-${n}`)?.focus()}else if(a.key==="ArrowUp"){a.preventDefault();const n=r-1;n>=0?document.getElementById(`price-${n}`)?.focus():Ee.current?.focus()}},id:`price-${r}`}),t.price<t.cost_price&&e.jsxs("div",{className:"absolute -top-10 right-0 bg-red-600 text-white text-xs px-4 py-1.5 rounded-full font-black whitespace-nowrap z-[100] flex items-center gap-1.5 shadow-xl pointer-events-none uppercase tracking-tighter border-2 border-white dark:border-red-900",children:[e.jsx(ft,{size:14,fill:"white",className:"text-red-600"}),"L·ªñ V·ªêN (G·ªëc: ",it(t.cost_price),")"]})]})}),e.jsxs("td",{className:"p-4 text-right",children:[e.jsx("div",{className:p("font-black text-lg transition-colors",t.quantity<0?"text-red-600 dark:text-red-400":"text-primary dark:text-[#d4a574]"),children:I(t.price*t.quantity)}),t.quantity<0&&e.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded text-[9px] font-black uppercase tracking-widest border border-red-200 dark:border-red-800/50 mt-1",children:"H√†ng tr·∫£"})]}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:p("px-3 py-1 rounded-full text-sm font-black transition-colors shadow-sm",t.is_combo?"bg-primary/10 text-primary":t.stock<10?"bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400":"bg-primary/5 dark:bg-[#4a7c59]/10 text-primary dark:text-[#d4a574]"),children:t.is_combo?"COMBO":t.stock})}),e.jsx("td",{className:"p-4",children:e.jsx(h.button,{whileHover:{scale:1.1,color:"#ef4444"},whileTap:{scale:.9},onClick:()=>zt(r),className:"text-gray-300 hover:text-red-500 transition-all opacity-0 group-hover:opacity-100",children:e.jsx(xt,{size:18})})})]},`cart-row-${r}`))})]})]})]})})]})}),e.jsxs("div",{className:"border-2 border-primary/30 p-4 print:hidden transition-colors rounded-[2.5rem] mx-4 mb-4 mt-2 shadow-2xl overflow-hidden relative main-content-bg",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.01] pointer-events-none",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 20px, rgba(139, 111, 71, 0.05) 20px, rgba(139, 111, 71, 0.05) 40px)",backgroundSize:"80px 80px"}}),e.jsxs("div",{className:"max-w-[1600px] mx-auto flex gap-4 items-start relative z-10",children:[e.jsxs("div",{className:"w-[22%] space-y-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4 bg-white/60 dark:bg-slate-800/40 backdrop-blur-sm p-4 rounded-[2rem] border-2 border-[#d4a574]/20 shadow-sm transition-all hover:shadow-md group/partner",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-primary/10 to-primary-hover/20 rounded-2xl shadow-inner flex items-center justify-center text-primary dark:text-[#d4a574] border border-white dark:border-slate-800 transition-transform group-hover/partner:scale-105 duration-500",children:e.jsx($e,{size:28})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-[10px] font-black text-muted dark:text-[#d4a574]/60 uppercase tracking-[0.2em]",children:"ƒê·ªëi t√°c giao d·ªãch"}),e.jsx("div",{className:"font-black text-primary dark:text-white text-xl uppercase leading-tight group-hover/partner:text-[#4a7c59] transition-colors duration-500 truncate",children:d?d.name:"Kh√°ch b√°n l·∫ª"}),d&&e.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[d.address&&e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-bold text-muted/80 dark:text-[#d4a574]/80 truncate",children:[e.jsx(Ut,{size:10,strokeWidth:2.5}),e.jsx("span",{className:"truncate",children:d.address})]}),d.phone&&e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-bold text-muted/60 dark:text-[#d4a574]/60 truncate",children:[e.jsx(mt,{size:10,strokeWidth:2.5}),e.jsx("span",{className:"truncate",children:d.phone})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-3 text-primary/30 dark:text-[#d4a574]/30",children:e.jsx(ht,{size:18})}),e.jsx("textarea",{placeholder:"Ghi ch√∫ ƒë∆°n h√†ng...",className:"w-full pl-10 p-3 bg-white/50 dark:bg-slate-800/50 border-2 border-[#d4a574]/10 rounded-2xl focus:bg-white dark:focus:bg-slate-800 focus:border-primary dark:focus:border-[#4a7c59] outline-none transition-all resize-none h-20 text-sm italic dark:text-gray-300",value:K,onChange:t=>X(t.target.value)})]})]}),e.jsxs("div",{className:"flex-1 space-y-4 pt-2 min-w-0",children:[e.jsxs("div",{className:p("flex justify-between items-center bg-primary/5 dark:bg-[#4a7c59]/10 p-4 rounded-2xl border-2 border-[#d4a574]/20 shadow-inner transition-all duration-500",_>0?"animate-pulse-smooth border-primary/40 shadow-lg shadow-primary/5":""),children:[e.jsx("span",{className:"text-xs font-black text-muted dark:text-[#d4a574]/80 uppercase tracking-widest",children:"C·ªông ti·ªÅn:"}),e.jsx("span",{className:"font-black text-4xl text-primary dark:text-[#f4c430]",children:I(_)})]}),e.jsxs("div",{className:"flex justify-between items-center px-4",children:[e.jsx("span",{className:"text-xs font-black text-muted/60 dark:text-[#d4a574]/40 uppercase tracking-widest",children:"N·ª£ c≈©:"}),e.jsx("span",{className:"font-black text-xl text-red-500 dark:text-red-400/80",children:I(ve)})]}),e.jsx("div",{className:"border-t border-dashed border-[#d4a574]/30 my-2"}),e.jsxs("div",{className:"flex justify-between items-center px-4 gap-3",children:[e.jsxs("div",{className:"flex bg-primary/10 dark:bg-[#4a7c59]/20 p-1.5 rounded-xl gap-1 border border-[#d4a574]/30 shrink-0",children:[e.jsx("button",{onClick:()=>L("Cash"),className:p("px-3 py-2 rounded-lg text-[10px] font-black transition-all whitespace-nowrap",b==="Cash"?"bg-primary text-white shadow-md scale-105":"text-primary/60 hover:text-primary dark:text-[#d4a574]/60"),children:"TI·ªÄN M·∫∂T"}),e.jsx("button",{onClick:()=>{L("Debt"),j(0)},className:p("px-3 py-2 rounded-lg text-[10px] font-black transition-all whitespace-nowrap",b==="Debt"?"bg-[#8b6f47] text-white shadow-md scale-105":"text-muted/60 hover:text-muted dark:text-[#d4a574]/60"),children:"C√îNG N·ª¢"}),e.jsx("button",{onClick:()=>{L("Pending"),j(0)},className:p("px-3 py-2 rounded-lg text-[10px] font-black transition-all whitespace-nowrap",b==="Pending"?"bg-[#f4c430] text-white shadow-md scale-105":"text-[#f4c430]/60 hover:text-[#f4c430] dark:text-[#d4a574]/60"),children:"CH·ªú T/T"})]}),e.jsx("input",{type:"text",readOnly:b==="Cash"||b==="Pending",className:p("flex-1 min-w-0 p-3 text-right rounded-xl font-black text-2xl outline-none border-none shadow-inner",b==="Cash"||b==="Pending"?"bg-primary/5 dark:bg-slate-800 text-primary/40":"bg-white dark:bg-slate-800 text-primary dark:text-[#d4a574] ring-2 ring-[#d4a574]/30 focus:ring-[#2d5016]"),value:I(O),autoComplete:"off",onChange:t=>j(parseFloat(t.target.value.replace(/,/g,""))||0)})]})]}),e.jsxs("div",{className:"w-[33%] space-y-4 min-w-0 shrink-0",children:[e.jsxs("div",{className:"bg-gradient-to-br from-primary to-primary-hover text-white p-6 rounded-[2.5rem] flex justify-between items-center shadow-xl shadow-primary/20 group transition-all border border-white/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-8 -mt-8 blur-3xl"}),e.jsxs("div",{className:"relative z-10 min-w-0 flex-1",children:[e.jsx("span",{className:"text-[10px] font-black uppercase opacity-60 tracking-[0.2em] block mb-1 whitespace-nowrap",children:"C√îNG N·ª¢ SAU ƒê∆†N:"}),e.jsx("span",{className:"text-5xl font-black tracking-tighter block truncate",children:I(It)})]}),e.jsx(Vt,{className:"text-white/20 group-hover:rotate-12 transition-transform duration-500 shrink-0 ml-2",size:48})]}),e.jsxs("div",{className:"flex gap-4 h-[72px]",children:[e.jsxs(h.button,{whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},disabled:u.length===0,onClick:rt,className:"w-20 bg-white/80 dark:bg-slate-800/80 text-muted dark:text-[#d4a574] rounded-[2rem] font-black text-[10px] uppercase flex flex-col items-center justify-center gap-1 hover:bg-[#d4a574]/10 transition-all border-2 border-[#d4a574]/20 group shadow-sm shrink-0",children:[e.jsx(Ne,{size:18,className:"group-hover:scale-110 transition-transform"}),e.jsx("span",{children:"Treo"})]}),e.jsxs(h.button,{whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},disabled:u.length===0||ae,onClick:()=>de(!1),className:"flex-1 min-w-0 bg-white/80 dark:bg-slate-800/80 text-primary dark:text-[#d4a574] rounded-[2rem] font-black hover:bg-primary/5 transition-all border-2 border-primary/20 group shadow-lg flex items-center justify-center gap-3 px-6",children:[e.jsx(Qt,{size:28,className:"group-hover:scale-110 transition-transform shrink-0"}),e.jsx("span",{className:"text-3xl uppercase tracking-widest font-black whitespace-nowrap",children:"L∆ØU"})]}),e.jsx(h.button,{whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:17},disabled:u.length===0||ae,onClick:()=>de(!0),className:p("flex-1 min-w-0 bg-gradient-to-r from-primary font-black to-primary-hover text-white rounded-[2rem] flex items-center justify-center shadow-xl shadow-primary/30 border border-white/20 transition-all group px-6",!ae&&u.length>0?"animate-pulse-smooth":""),children:ae?e.jsx("div",{className:"w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gt,{size:28,className:"group-hover:translate-x-1 transition-transform shrink-0"}),e.jsx("span",{className:"text-3xl tracking-widest uppercase font-black whitespace-nowrap",children:"IN"})]})})]})]})]})]})]}),e.jsx($,{children:xe&&e.jsx(dt,{isOpen:xe,partner:{name:Ue,is_customer:!0,is_supplier:!1},onClose:()=>he(!1),onSave:()=>{ce(),he(!1)}})}),e.jsx($,{children:fe&&e.jsx(ct,{isOpen:fe,product:{name:Ue},onClose:()=>ge(!1),onSave:()=>{le(),ge(!1)}})}),ue&&ue.details&&ue.details.length>0&&e.jsx("div",{className:"only-print",children:e.jsx(lt,{data:ue,settings:F,type:"Sale"})}),e.jsx($,{children:Te&&e.jsx(Mt,{message:Te.message,type:Te.type,onClose:()=>Z(null)})}),e.jsx(ct,{isOpen:ze,product:wt,onClose:()=>re(!1),onSave:le}),e.jsx(dt,{isOpen:Nt,partner:_t,onClose:()=>Re(!1),onSave:async()=>{if(await ce(),d){const r=(await q.get("/api/partners")).data.find(a=>a.id===d.id);r&&k(r)}}}),e.jsx($,{children:Le&&Ge&&e.jsx(nt,{children:e.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 font-sans",children:e.jsxs(h.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-slate-900 w-full max-w-4xl max-h-[90vh] rounded-[3rem] shadow-2xl overflow-hidden border border-white dark:border-emerald-900/30 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b dark:border-emerald-900/30 flex justify-between items-center bg-gray-50 dark:bg-emerald-950/20",children:[e.jsxs("h2",{className:"text-xl font-black text-gray-800 dark:text-emerald-400 uppercase tracking-tighter flex items-center gap-3",children:[e.jsx(pt,{size:24,className:"text-primary"}),"Xem tr∆∞·ªõc n·ªôi dung in"]}),e.jsx("button",{onClick:()=>ie(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-slate-800 rounded-xl transition-all",children:e.jsx(He,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-10 bg-gray-100 dark:bg-slate-950 flex justify-center",children:e.jsx("div",{className:"bg-white shadow-2xl h-fit",children:e.jsx(lt,{data:Ge,settings:F,type:"Sale",isPreview:!0})})}),e.jsxs("div",{className:"p-6 border-t dark:border-emerald-900/30 flex gap-4 bg-gray-50 dark:bg-emerald-950/10",children:[e.jsxs(h.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>ie(!1),className:"flex-1 bg-white dark:bg-slate-800 text-[#8b6f47] dark:text-[#d4a574]/80 border-2 border-[#d4a574]/30 py-4 rounded-2xl font-black uppercase tracking-widest text-xs hover:bg-[#d4a574]/10 hover:text-[#2d5016] dark:hover:text-[#d4a574] transition-all flex items-center justify-center gap-2",children:[e.jsx(Jt,{size:18,strokeWidth:2.5}),"ƒê√≥ng xem tr∆∞·ªõc"]}),e.jsx("button",{onClick:()=>{ie(!1),de(!0)},className:"flex-1 bg-primary text-white py-4 rounded-2xl font-black uppercase tracking-widest text-xs hover:bg-emerald-700 shadow-lg shadow-emerald-500/20 transition-all",children:"L∆∞u & In th·ª±c t·∫ø"})]})]})})})}),e.jsx(At,{isVisible:ae&&D.length===0,message:"ƒêang n·∫°p d·ªØ li·ªáu POS..."})]})}export{or as default};
