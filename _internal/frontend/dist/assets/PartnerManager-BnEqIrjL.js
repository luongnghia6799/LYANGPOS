import{r as n,a1 as Ne,ab as ve,j as e}from"./vendor-C23Namvk.js";import{a as y}from"./vendor-utils-C44aPrMG.js";import{d as de,P as ue,b as E,c as g,a as we,L as Ce}from"./index-UsWd1F3S.js";import{T as fe}from"./Toast-DQljrx14.js";import{P as _e}from"./PartnerEditModal-Dpv7L0QI.js";import{O as Se}from"./OrderEditPopup-D_7BTVt5.js";import{P as Te}from"./PrintTemplate-Caxf_GDA.js";import{D as Pe}from"./settings-BT5ickwW.js";import{C as ye}from"./ConfirmModal-DOatB4D2.js";import{A as L,m as k}from"./vendor-framer-DVZK1f_z.js";import{a5 as je,a7 as he,a2 as De,X as me,b as Me,af as ke,ag as ze,a6 as Ie,U as Oe,_ as ge,ah as Ae,ai as Fe,N as Ee,$ as be,aj as Le,ae as Be,i as Re,C as $e}from"./vendor-icons-B3K5gD8o.js";function He({isOpen:j,partner:p,onClose:se}){const[w,U]=n.useState([]),[re,X]=n.useState(!0),[b,H]=n.useState("All"),[o,D]=n.useState({year:new Date().getFullYear(),month:"",day:"",quarter:""}),[M,N]=n.useState("All"),[h,S]=n.useState(1),[u,ne]=n.useState(20),[B,J]=n.useState(1),[le,R]=n.useState(0),[ie,v]=n.useState([]),[d,Y]=n.useState(null),[te,W]=n.useState(null),[T,V]=n.useState(!1),[ae,z]=n.useState(null),[f,C]=n.useState(null),[q,Z]=n.useState(Pe),oe=n.useRef();Ne(),n.useEffect(()=>{if(j&&p){K(),ee(),document.body.style.overflow="hidden";const t=document.getElementById("main-content");t&&(t.style.overflow="hidden")}else{document.body.style.overflow="";const t=document.getElementById("main-content");t&&(t.style.overflow="auto")}return()=>{document.body.style.overflow="";const t=document.getElementById("main-content");t&&(t.style.overflow="auto")}},[j,p]),n.useEffect(()=>{j&&p&&P()},[j,p,b,o,M,d,h,u,T]);const ee=async()=>{try{const s=(await y.get("/api/print-templates?module=Report")).data;if(s&&s.length>0){const r=s.find(m=>m.is_default)||s[0];if(r)try{const m=JSON.parse(r.config);Z($=>({...$,...m}))}catch(m){console.error("Error parsing template config",m)}}}catch(t){console.error(t)}},K=async()=>{try{const t=await y.get(`/api/partners/${p.id}/debt-cycles`);v(t.data)}catch(t){console.error(t)}},I=async()=>{C({title:"Tính toán lại nợ",message:"Hệ thống sẽ tính toán lại toàn bộ lịch sử để cập nhật số dư công nợ chính xác nhất. Tiếp tục?",onConfirm:async()=>{try{const t=await y.post(`/api/partners/${p.id}/recalculate-debt`);K(),P(),z({message:`Đã cập nhật số dư nợ mới: ${E(t.data.new_balance)} VNĐ`,type:"success"})}catch(t){console.error(t),z({message:"Lỗi khi tính toán lại nợ",type:"error"})}C(null)},type:"warning"})},P=async()=>{X(!0);try{if(b==="Transactions"){const s=(await y.get("/api/vouchers",{params:{partner_id:p.id,start_date:d?.start_date,end_date:d?.end_date}})).data.map(m=>({...m,display_id:m.type==="Receipt"?`PT-${m.id}`:`PC-${m.id}`,total_amount:m.amount,payment_method:"Cash"})),r=(h-1)*u;U(s.slice(r,r+u)),R(s.length),J(Math.ceil(s.length/u))}else if(b==="All"){const t={partner_id:p.id,start_date:d?.start_date,end_date:d?.end_date},[s,r]=await Promise.all([y.get("/api/orders",{params:{...t,limit:1e3}}),y.get("/api/vouchers",{params:t})]),m=(s.data.items||s.data).map(l=>({...l,category:"Order",display_id:l.display_id||`DH-${l.id}`})).filter(l=>l.payment_method==="Debt"),$=r.data.map(l=>({...l,category:"Voucher",display_id:l.type==="Receipt"?`PT-${l.id}`:`PC-${l.id}`,total_amount:l.amount,payment_method:"Cash",type:l.type}));let c=[...m,...$];if(d){const l=new Date(d.start_date),a=d.end_date?new Date(d.end_date):new Date;c=c.filter(x=>{const i=new Date(x.date);return i>=l&&i<=a})}if(o.year&&(c=c.filter(l=>new Date(l.date).getFullYear()===parseInt(o.year))),o.month&&(c=c.filter(l=>new Date(l.date).getMonth()+1===parseInt(o.month))),o.day&&(c=c.filter(l=>new Date(l.date).getDate()===parseInt(o.day))),o.quarter&&(o.quarter==="1"&&(c=c.filter(l=>[1,2,3].includes(new Date(l.date).getMonth()+1))),o.quarter==="2"&&(c=c.filter(l=>[4,5,6].includes(new Date(l.date).getMonth()+1))),o.quarter==="3"&&(c=c.filter(l=>[7,8,9].includes(new Date(l.date).getMonth()+1))),o.quarter==="4"&&(c=c.filter(l=>[10,11,12].includes(new Date(l.date).getMonth()+1)))),M!=="All"&&(c=c.filter(l=>l.payment_method===M)),T){const l=new Set(c.filter(a=>a.category==="Order"&&a.amount_paid>=Math.abs(a.total_amount)).map(a=>a.id));c=c.filter(a=>!(a.category==="Order"&&l.has(a.id)||a.category==="Voucher"&&a.order_id&&l.has(a.order_id)))}c.sort((l,a)=>new Date(a.date)-new Date(l.date));const ce=(h-1)*u;U(c.slice(ce,ce+u)),R(c.length),J(Math.ceil(c.length/u)),G.current=c}else{const t={partner_id:p.id,page:h,limit:u,type:b,year:o.year,month:o.month,day:o.day,quarter:o.quarter,payment_method:"Debt",start_date:d?.start_date,end_date:d?.end_date},s=await y.get("/api/orders",{params:t});s.data.items?(U(s.data.items),J(s.data.pages),R(s.data.total),G.current=s.data.items):(U(s.data),J(1),R(s.data.length),G.current=s.data)}}catch(t){console.error("Error fetching partner history:",t)}finally{X(!1)}},G=n.useRef([]),Q=ve.useReactToPrint({contentRef:oe,documentTitle:`Bao_Cao_${p.name}_${de(new Date)}`}),O=t=>{if(t.category==="Order"&&t.payment_method==="Cash")return 0;const s=t.total_amount||0;return t.type==="Receipt"||t.type==="Purchase"?-s:s},A=n.useMemo(()=>w.reduce((t,s)=>t+O(s),0),[w]),F=n.useMemo(()=>b!=="All"||!p||isNaN(A)?0:p.debt_balance-A,[p,A,b]),xe=async()=>{!F||Math.abs(F)<1e3||C({title:"Ghi nhận nợ đầu kỳ",message:`Phát hiện chênh lệch ${E(F)} VNĐ. Hệ thống sẽ tạo phiếu "Nợ đầu kỳ" để cân bằng lịch sử. Tiếp tục?`,onConfirm:async()=>{try{await y.post(`/api/partners/${p.id}/fix-opening-balance`,{amount:F}),P(),K(),z({message:"Đã tạo phiếu nợ đầu kỳ thành công!",type:"success"})}catch(t){console.error(t),z({message:"Lỗi: "+(t.response?.data?.error||t.message),type:"error"})}C(null)},type:"info"})};return e.jsxs(ue,{children:[e.jsx(L,{children:j&&e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4 md:p-8 no-print backdrop-blur-sm bg-slate-900/40",style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:[e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:se,className:"absolute inset-0"}),e.jsxs(k.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative bg-white dark:bg-slate-900 w-full max-w-6xl max-h-full md:max-h-[95vh] overflow-hidden rounded-[2rem] md:rounded-[2.5rem] shadow-2xl border border-white/20 flex flex-col transition-colors",children:[e.jsxs("div",{className:"p-6 border-b dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black text-emerald-600 dark:text-emerald-400 uppercase tracking-tighter flex items-center gap-3",children:[e.jsx(je,{size:28}),"Lịch sử giao dịch: ",p.name]}),e.jsxs("p",{className:"text-xs font-bold text-gray-500 uppercase mt-1 flex items-center gap-4",children:[e.jsxs("span",{children:["SĐT: ",p.phone||"N/A"]}),e.jsxs("span",{children:["| Nợ hiện tại: ",e.jsxs("span",{className:g(p.debt_balance>0?"text-blue-500":p.debt_balance<0?"text-red-500":"text-gray-400"),children:[E(Math.abs(p.debt_balance))," ",p.debt_balance>0?"(Nợ mình)":p.debt_balance<0?"(Mình nợ)":""]})]}),b==="All"&&Math.abs(F)>1e3&&e.jsxs("button",{onClick:xe,className:"ml-2 text-[9px] bg-rose-500 hover:bg-rose-600 text-white px-2 py-1 rounded-lg font-black transition-colors",title:"Tạo phiếu nợ đầu kỳ để khớp số liệu",children:[e.jsx(he,{size:10,className:"inline mr-1"})," GHI NHẬN NỢ ĐẦKỲ (",E(F),")"]}),e.jsxs("button",{onClick:I,className:"ml-2 text-[9px] bg-amber-500 hover:bg-amber-600 text-white px-2 py-1 rounded-lg font-black transition-colors",title:"Tính toán lại nợ từ lịch sử (Cẩn thận: Sẽ xóa số dư thủ công nếu không có lịch sử)",children:[e.jsx(he,{size:10,className:"inline mr-1"})," ĐỒNG BỘ NỢ"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-100 dark:bg-slate-800 px-3 py-2 rounded-xl border border-transparent hover:border-emerald-500 transition-all",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:t=>V(t.target.checked),className:"accent-emerald-500 w-4 h-4 cursor-pointer"}),e.jsx("span",{className:"text-[10px] font-black uppercase text-gray-600 dark:text-gray-300",children:"Ẩn đơn đã tất toán"})]}),e.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-4 py-2 bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-400 rounded-xl font-black text-xs uppercase hover:bg-emerald-200 transition-colors",children:[e.jsx(De,{size:16})," In Báo Cáo"]}),e.jsx("button",{onClick:se,className:"p-2 hover:bg-rose-50 dark:hover:bg-rose-900/20 text-gray-400 hover:text-rose-500 rounded-xl transition-all",children:e.jsx(me,{size:24})})]})]}),e.jsx("div",{className:"p-6 bg-white dark:bg-slate-900 border-b dark:border-slate-800 space-y-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-slate-800 rounded-xl",children:[e.jsx("button",{onClick:()=>H("All"),className:g("px-4 py-1.5 rounded-lg text-xs font-black uppercase transition-all",b==="All"?"bg-white dark:bg-slate-700 text-emerald-600 shadow-sm":"text-gray-400"),children:"Tất cả"}),e.jsx("button",{onClick:()=>H("Sale"),className:g("px-4 py-1.5 rounded-lg text-xs font-black uppercase transition-all",b==="Sale"?"bg-white dark:bg-slate-700 text-emerald-600 shadow-sm":"text-gray-400"),children:"Bán hàng"}),e.jsx("button",{onClick:()=>H("Purchase"),className:g("px-4 py-1.5 rounded-lg text-xs font-black uppercase transition-all",b==="Purchase"?"bg-white dark:bg-slate-700 text-emerald-600 shadow-sm":"text-gray-400"),children:"Nhập hàng"}),e.jsx("button",{onClick:()=>H("Transactions"),className:g("px-4 py-1.5 rounded-lg text-xs font-black uppercase transition-all",b==="Transactions"?"bg-white dark:bg-slate-700 text-emerald-600 shadow-sm":"text-gray-400"),children:"Lịch sử trả nợ"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-slate-800 px-3 py-1.5 rounded-xl border border-transparent focus-within:border-emerald-500 transition-all",children:[e.jsx(Me,{size:16,className:"text-emerald-500"}),e.jsxs("select",{value:o.day,onChange:t=>D({...o,day:t.target.value}),className:"bg-transparent border-none outline-none font-bold text-xs uppercase cursor-pointer dark:text-gray-200",children:[e.jsx("option",{value:"",children:"Ngày"}),[...Array(31)].map((t,s)=>e.jsx("option",{value:s+1,children:s+1},s+1))]}),e.jsx("span",{className:"text-gray-300",children:"/"}),e.jsxs("select",{value:o.month,onChange:t=>D({...o,month:t.target.value}),className:"bg-transparent border-none outline-none font-bold text-xs uppercase cursor-pointer dark:text-gray-200",children:[e.jsx("option",{value:"",children:"Tháng"}),[...Array(12)].map((t,s)=>e.jsx("option",{value:s+1,children:s+1},s+1))]}),e.jsx("span",{className:"text-gray-300",children:"/"}),e.jsxs("select",{value:o.quarter,onChange:t=>D({...o,quarter:t.target.value}),className:"bg-transparent border-none outline-none font-bold text-xs uppercase cursor-pointer dark:text-gray-200",children:[e.jsx("option",{value:"",children:"Quý"}),e.jsx("option",{value:"1",children:"Quý 1"}),e.jsx("option",{value:"2",children:"Quý 2"}),e.jsx("option",{value:"3",children:"Quý 3"}),e.jsx("option",{value:"4",children:"Quý 4"})]}),e.jsx("span",{className:"text-gray-300",children:"/"}),e.jsx("select",{value:o.year,onChange:t=>D({...o,year:t.target.value}),className:"bg-transparent border-none outline-none font-bold text-xs uppercase cursor-pointer dark:text-gray-200",children:[...Array(5)].map((t,s)=>{const r=new Date().getFullYear()-s;return e.jsx("option",{value:r,children:r},r)})})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-slate-800 px-3 py-1.5 rounded-xl",children:[e.jsx(ke,{size:16,className:"text-emerald-500"}),e.jsxs("select",{value:M,onChange:t=>N(t.target.value),className:"bg-transparent border-none outline-none font-bold text-xs uppercase cursor-pointer dark:text-gray-200",children:[e.jsx("option",{value:"All",children:"PTTT: Tất cả"}),e.jsx("option",{value:"Cash",children:"Tiền mặt"}),e.jsx("option",{value:"Debt",children:"Công nợ"})]})]}),e.jsx("div",{className:"relative group",children:e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-slate-800 px-3 py-1.5 rounded-xl border-2 border-transparent hover:border-amber-500/50 transition-all cursor-pointer",children:[e.jsx(ze,{size:16,className:"text-amber-500"}),e.jsxs("select",{value:d?JSON.stringify(d):"",onChange:t=>{const s=t.target.value;Y(s?JSON.parse(s):null),S(1)},className:"bg-transparent border-none outline-none font-bold text-xs uppercase cursor-pointer dark:text-gray-200",children:[e.jsx("option",{value:"",children:"Tất cả thời gian (Kỳ nợ)"}),ie.map((t,s)=>e.jsxs("option",{value:JSON.stringify({...t,index:s+1}),children:["Kỳ ",s+1," (",de(t.start_date).split(" ")[0]," - ",t.end_date?de(t.end_date).split(" ")[0]:"Hiện tại","): ",t.status]},s))]})]})}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-gray-400",children:"Hiển thị:"}),e.jsxs("select",{value:u,onChange:t=>{ne(parseInt(t.target.value)),S(1)},className:"bg-gray-100 dark:bg-slate-800 border-none rounded-lg px-2 py-1 text-[10px] font-black outline-none dark:text-white uppercase cursor-pointer transition-colors",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-auto p-6 bg-gray-50/30 dark:bg-slate-950/30",children:e.jsxs("table",{className:"w-full text-left border-separate border-spacing-y-2",children:[e.jsx("thead",{className:"bg-[#f0fdf4] dark:bg-emerald-950/20 uppercase text-[10px] font-black tracking-widest text-emerald-800/60 dark:text-emerald-400/60 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 rounded-l-2xl",children:"Mã"}),e.jsx("th",{className:"p-4",children:"Ngày giao dịch"}),e.jsx("th",{className:"p-4",children:"Loại"}),e.jsx("th",{className:"p-4",children:"PTTT/Ghi chú"}),e.jsx("th",{className:"p-4 text-right",children:"Tổng tiền"}),e.jsx("th",{className:"p-4 text-right rounded-r-2xl",children:"Thao tác"})]})}),e.jsx("tbody",{className:"divide-y-0",children:re?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-20 text-center text-gray-400 font-bold uppercase tracking-[0.2em] text-xs",children:"Đang tải dữ liệu..."})}):w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-20 text-center text-gray-400 font-bold uppercase tracking-[0.2em] text-xs",children:"Không có dữ liệu"})}):e.jsxs(e.Fragment,{children:[w.map((t,s)=>{const r=O(t),m=t.category==="Order"&&t.payment_method==="Cash",$=r<0;return e.jsxs(k.tr,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:s*.02},className:"bg-white dark:bg-slate-800 hover:shadow-lg hover:z-20 relative group transition-all group rounded-2xl cursor-default",children:[e.jsxs("td",{className:"p-4 font-black text-gray-400 rounded-l-2xl group-hover:text-emerald-500 transition-colors",children:["#",t.display_id||t.id]}),e.jsx("td",{className:"p-4 font-bold text-gray-600 dark:text-gray-300 text-sm whitespace-nowrap",children:de(t.date)}),e.jsxs("td",{className:"p-4",children:[e.jsx("span",{className:g("px-2 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest",t.type==="Sale"?"bg-blue-100 text-blue-600":t.type==="Purchase"?"bg-amber-100 text-amber-600":t.type==="Receipt"?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"),children:t.type==="Sale"?"Bán hàng":t.type==="Purchase"?"Nhập hàng":t.type==="Receipt"?"Thanh toán (Thu)":"Thanh toán (Chi)"}),t.category==="Order"&&t.total_amount<0&&e.jsx("div",{className:"text-[8px] font-black text-amber-500 uppercase mt-1 tracking-wider",children:"Trả hàng"})]}),e.jsx("td",{className:"p-4",children:t.category==="Order"?t.total_amount<0?e.jsx("span",{className:g("px-2 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest",t.payment_method==="Debt"?"bg-amber-100 text-amber-600":"bg-purple-100 text-purple-600"),children:t.payment_method==="Debt"?"Trừ nợ":"Hoàn tiền"}):e.jsx("span",{className:g("px-2 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest",t.payment_method==="Cash"?"bg-emerald-100 text-emerald-600":t.amount_paid>=t.total_amount?"bg-blue-100 text-blue-600":"bg-rose-100 text-rose-600"),children:t.payment_method==="Cash"?"Tiền mặt":t.amount_paid>=t.total_amount?"Tất toán":"Công nợ"}):e.jsx("span",{className:"text-xs italic text-gray-500 truncate max-w-[200px] block",title:t.note,children:t.note||"Không ghi chú"})}),e.jsx("td",{className:g("p-4 text-right font-black text-base",m?"text-gray-400 decoration-slice":t.type==="Receipt"?"text-emerald-600":t.type==="Purchase"?"text-amber-600":"text-gray-800 dark:text-gray-200"),children:m?e.jsxs("span",{className:"flex items-center justify-end gap-2",children:[e.jsx("span",{className:"line-through opacity-50",children:E(t.total_amount)}),e.jsx("span",{className:"text-[10px] bg-gray-100 dark:bg-slate-700 px-1 py-0.5 rounded",children:"Đã TT"})]}):e.jsxs(e.Fragment,{children:[$?"-":"+",E(Math.abs(r))]})}),e.jsx("td",{className:"p-4 text-right space-x-1 rounded-r-2xl",children:t.category==="Order"&&e.jsx("button",{onClick:()=>W(t),className:"p-2 text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-xl transition-all",title:"Xem/Sửa",children:e.jsx(Ie,{size:18})})})]},t.id+t.category)}),e.jsxs("tr",{className:"bg-emerald-50 dark:bg-emerald-950/40 font-black text-emerald-800 dark:text-emerald-300",children:[e.jsx("td",{colSpan:"4",className:"p-4 text-right uppercase tracking-[0.2em] text-xs rounded-l-2xl",children:"Tổng cộng (trên trang này):"}),e.jsx("td",{className:"p-4 text-right text-lg",children:E(A)}),e.jsx("td",{className:"p-4 rounded-r-2xl"})]})]})})]})}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800 border-t dark:border-slate-700 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:["Hiển thị ",e.jsxs("span",{className:"text-emerald-600",children:[(h-1)*u+1," - ",Math.min(h*u,le)]})," / ",e.jsx("span",{className:"text-emerald-600",children:le})," đơn"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{disabled:h===1,onClick:()=>S(t=>Math.max(1,t-1)),className:"px-4 py-2 border-2 dark:border-slate-700 rounded-xl text-[10px] font-black uppercase tracking-widest disabled:opacity-30 hover:bg-white dark:hover:bg-slate-700 transition-all dark:text-emerald-400",children:"Trước"}),[...Array(B)].map((t,s)=>{const r=s+1;return r===1||r===B||r>=h-2&&r<=h+2?e.jsx("button",{onClick:()=>S(r),className:g("w-8 h-8 rounded-xl text-[10px] font-black transition-all",h===r?"bg-emerald-600 text-white shadow-lg":"hover:bg-emerald-50 dark:hover:bg-emerald-900/20 text-gray-600 dark:text-gray-400 border-2 dark:border-slate-700"),children:r},r):r===h-3||r===h+3?e.jsx("span",{className:"px-1 text-emerald-300",children:"..."},r):null}),e.jsx("button",{disabled:h===B,onClick:()=>S(t=>Math.min(B,t+1)),className:"px-4 py-2 border-2 dark:border-slate-700 rounded-xl text-[10px] font-black uppercase tracking-widest disabled:opacity-30 hover:bg-white dark:hover:bg-slate-700 transition-all dark:text-emerald-400",children:"Sau"})]})]})]})]})}),e.jsx("div",{style:{display:"none"},children:e.jsx(Te,{ref:oe,data:{partner:p,details:n.useMemo(()=>{let t=G.current||w;if(T){const s=new Set(t.filter(r=>r.category==="Order"&&r.amount_paid>=Math.abs(r.total_amount)).map(r=>r.id));t=t.filter(r=>!(r.category==="Order"&&s.has(r.id)||r.category==="Voucher"&&r.order_id&&s.has(r.order_id)))}return t.map(s=>({...s,total_amount:O(s)}))},[w,T,h,u,b,o,M,d]),total_amount:n.useMemo(()=>{let t=G.current||w;if(T){const s=new Set(t.filter(r=>r.category==="Order"&&r.amount_paid>=Math.abs(r.total_amount)).map(r=>r.id));t=t.filter(r=>!(r.category==="Order"&&s.has(r.id)||r.category==="Voucher"&&r.order_id&&s.has(r.order_id)))}return t.reduce((s,r)=>s+O(r),0)},[w,T,h,u,b,o,M,d]),type:"Report"},settings:q,type:"Report"})}),e.jsx(ue,{children:e.jsx(L,{children:te&&e.jsx(Se,{order:te,partner:p,onClose:()=>W(null),onSave:()=>{P(),K(),W(null)}})})}),e.jsx(L,{children:ae&&e.jsx(fe,{message:ae.message,type:ae.type,onClose:()=>z(null)})}),f&&e.jsx(ye,{isOpen:!!f,title:f.title,message:f.message,onConfirm:f.onConfirm,onCancel:()=>C(null),type:f.type})]})}const Ve={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.02,ease:"easeOut"}}},pe={hidden:{opacity:0,y:15},visible:{opacity:1,y:0,transition:{duration:.4,ease:[.22,1,.36,1]}}};function tt(){const[j,p]=n.useState([]),[se,w]=n.useState(!1),[U,re]=n.useState(null),[X,b]=n.useState(null),[H,o]=n.useState(""),[D,M]=n.useState(""),[N,h]=n.useState("All"),[S,u]=n.useState(null),[ne,B]=n.useState({}),[J,le]=n.useState([]),[R,ie]=n.useState(!0),[v,d]=n.useState(1),[Y,te]=n.useState(1),[W,T]=n.useState(0),[V,ae]=n.useState(20),[z,f]=n.useState(null),[C,q]=n.useState(null),[Z,oe]=n.useState("name"),[ee,K]=n.useState("asc"),[I,P]=n.useState([]);n.useEffect(()=>{Q(),P([])},[v,V,D,N,Z,ee]),n.useEffect(()=>{G()},[]);const G=async()=>{try{const x=(await y.get("/api/products")).data.sort((i,_)=>(i.name||"").localeCompare(_.name||"","vi",{sensitivity:"base"}));le(x)}catch(a){console.error(a)}},Q=async()=>{ie(!0);try{const a=await y.get("/api/partners",{params:{search:D,type:N,page:v,limit:V,sort_by:Z,sort_order:ee}});a.data.items?(p(a.data.items),te(a.data.pages),T(a.data.total)):(p(a.data),te(1),T(a.data.length))}catch(a){console.error(a)}finally{ie(!1)}},O=a=>{Z===a?K(ee==="asc"?"desc":"asc"):(oe(a),K("desc")),d(1)},A=({field:a})=>Z!==a?e.jsx(he,{size:14,className:"ml-1 opacity-20"}):ee==="asc"?e.jsx(Re,{size:14,className:"ml-1 text-[#4a7c59]"}):e.jsx($e,{size:14,className:"ml-1 text-[#4a7c59]"}),F=()=>{M(H),d(1)},xe=a=>{q({title:"Xác nhận xóa",message:"Bạn có chắc chắn muốn xóa đối tác này? Toàn bộ lịch sử giao dịch sẽ bị ảnh hưởng.",onConfirm:async()=>{try{await y.delete(`/api/partners/${a}`),f({message:"Đã xóa đối tác thành công",type:"success"}),Q()}catch(x){f({message:x.response?.data?.error||"Lỗi khi xóa",type:"error"})}q(null)},type:"danger"})},t=()=>{q({title:"Xóa hàng loạt",message:`Bạn có chắc chắn muốn xóa ${I.length} đối tác đã chọn?`,onConfirm:async()=>{try{const a=await y.post("/api/partners/bulk-delete",{ids:I});f({message:a.data.message,type:"success"}),P([]),Q()}catch(a){f({message:a.response?.data?.error||"Lỗi khi xóa hàng loạt",type:"error"})}q(null)},type:"danger"})},s=a=>{P(x=>x.includes(a)?x.filter(i=>i!==a):[...x,a])},r=()=>{I.length===j.length&&j.length>0?P([]):P(j.map(a=>a.id))},m=()=>{re(null),w(!0)},$=a=>{re(a),w(!0)},c=async a=>{const x=a.target.files[0];if(!x)return;const i=new FormData;i.append("file",x);try{const _=await y.post("/api/partners/import",i);f({message:_.data.message,type:"success"}),Q()}catch{f({message:"Lỗi import",type:"error"})}},ce=async a=>{u(a);try{const x=await y.get(`/api/custom-prices/${a.id}`);B(x.data)}catch(x){console.error(x)}},l=async(a,x)=>{if(S)try{await y.post("/api/custom-prices",{partner_id:S.id,product_id:a,price:parseFloat(x)||0}),B(i=>({...i,[a]:parseFloat(x)||0}))}catch{f({message:"Lỗi khi lưu giá",type:"error"})}};return e.jsxs(k.div,{initial:"hidden",animate:"visible",variants:Ve,className:"p-4 md:p-8 space-y-6 w-full max-w-[98%] mx-auto transition-colors",children:[e.jsxs(k.div,{variants:pe,className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-black text-[#2d5016] dark:text-[#4a7c59] uppercase tracking-tight flex items-center gap-3 py-1",children:[e.jsx(Oe,{size:36,className:"text-[#4a7c59]"}),"ĐỐI TÁC VỤ MÙA"]}),e.jsx("p",{className:"text-[#8b6f47] dark:text-[#d4a574]/60 font-medium tracking-tight",children:"Quản lý khách hàng, nhà cung cấp và công nợ"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(L,{children:I.length>0&&e.jsxs(k.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onClick:t,className:"bg-red-600 text-white px-5 py-2.5 rounded-2xl flex items-center gap-2 hover:bg-red-700 transition-all shadow-lg shadow-red-500/20 font-black uppercase text-xs",children:[e.jsx(ge,{size:18})," Xóa mục chọn (",I.length,")"]})}),e.jsxs("button",{onClick:()=>window.open("/api/partners/template","_blank"),className:"bg-[#d4a574]/10 dark:bg-[#d4a574]/20 text-[#8b6f47] dark:text-[#d4a574] px-5 py-2.5 rounded-2xl flex items-center gap-2 hover:bg-[#d4a574]/20 transition-all font-black uppercase text-xs border-2 border-[#d4a574]/30",children:[e.jsx(Ae,{size:18})," Mẫu Excel"]}),e.jsxs("button",{onClick:()=>window.open("/api/partners/export","_blank"),className:"bg-[#4a7c59]/10 dark:bg-[#4a7c59]/20 text-[#2d5016] dark:text-[#4a7c59] px-5 py-2.5 rounded-2xl flex items-center gap-2 hover:bg-[#4a7c59]/20 transition-all font-black uppercase text-xs border-2 border-[#4a7c59]/30",children:[e.jsx(je,{size:18})," Xuất DS"]}),e.jsxs("label",{className:"bg-[#f4c430] text-white px-5 py-2.5 rounded-2xl flex items-center gap-2 hover:bg-[#e0b020] transition-all shadow-lg shadow-[#f4c430]/20 font-black uppercase text-xs cursor-pointer",children:[e.jsx(Fe,{size:18})," Nhập Excel",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx, .xls",onChange:c})]}),e.jsxs("button",{onClick:m,className:"bg-gradient-to-r from-[#2d5016] to-[#4a7c59] text-white px-5 py-2.5 rounded-2xl flex items-center gap-2 hover:shadow-xl transition-all shadow-lg shadow-[#2d5016]/20 font-black uppercase text-xs",children:[e.jsx(Ee,{size:18})," Thêm Đối Tác"]})]})]}),e.jsxs(k.div,{variants:pe,className:"bg-white/60 dark:bg-slate-900/60 backdrop-blur-md p-4 rounded-xl border-2 border-[#d4a574]/30 flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(be,{className:"absolute left-3 top-2.5 text-[#8b6f47]",size:20}),e.jsx("input",{type:"text",placeholder:"Tìm kiếm đối tác...",value:H,onChange:a=>o(a.target.value),onKeyDown:a=>a.key==="Enter"&&F(),className:"w-full pl-10 pr-4 py-2.5 border-2 border-[#d4a574]/30 bg-white dark:bg-slate-950 dark:text-white rounded-2xl focus:outline-none focus:border-[#4a7c59] font-bold transition-all"})]}),e.jsxs("button",{onClick:F,className:"bg-gradient-to-r from-[#2d5016] to-[#4a7c59] text-white px-6 py-2.5 rounded-2xl font-black uppercase text-xs hover:shadow-xl transition-all shadow-md flex items-center gap-2",children:[e.jsx(be,{size:16})," Tìm đối tác"]}),D&&e.jsx("button",{onClick:()=>{o(""),M(""),d(1)},className:"text-[#8b6f47] hover:text-red-500 transition-colors",children:e.jsx(me,{size:20})})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-xs font-bold text-[#8b6f47]",children:"Hiển thị:"}),e.jsxs("select",{value:V,onChange:a=>{ae(parseInt(a.target.value)),d(1)},className:"bg-white/80 dark:bg-slate-950/80 border-2 border-[#d4a574]/30 rounded-2xl px-3 py-2 text-sm font-bold outline-none dark:text-white focus:border-[#4a7c59] transition-all shadow-sm cursor-pointer",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"flex gap-1.5 p-1.5 bg-gradient-to-r from-[#faf8f3]/50 to-[#f5f1e8]/50 dark:from-slate-900 dark:to-slate-800 rounded-2xl w-fit border-2 border-[#d4a574]/30 shadow-inner",children:[e.jsxs("button",{onClick:()=>{h("All"),d(1)},className:g("relative px-5 py-2.5 rounded-xl text-xs font-black uppercase transition-all duration-200",N==="All"?"text-white":"text-[#8b6f47] hover:bg-[#d4a574]/10"),children:[N==="All"&&e.jsx(k.div,{layoutId:"partnerFilterIndicator",className:"absolute inset-0 bg-gradient-to-r from-[#2d5016] to-[#4a7c59] rounded-xl shadow-lg",transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx("span",{className:"relative z-10",children:"Tất cả"})]}),e.jsxs("button",{onClick:()=>{h("Customer"),d(1)},className:g("relative px-5 py-2.5 rounded-xl text-xs font-black uppercase transition-all duration-200",N==="Customer"?"text-white":"text-[#8b6f47] hover:bg-[#d4a574]/10"),children:[N==="Customer"&&e.jsx(k.div,{layoutId:"partnerFilterIndicator",className:"absolute inset-0 bg-gradient-to-r from-[#2d5016] to-[#4a7c59] rounded-xl shadow-lg",transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx("span",{className:"relative z-10",children:"Khách hàng"})]}),e.jsxs("button",{onClick:()=>{h("Supplier"),d(1)},className:g("relative px-5 py-2.5 rounded-xl text-xs font-black uppercase transition-all duration-200",N==="Supplier"?"text-white":"text-[#8b6f47] hover:bg-[#d4a574]/10"),children:[N==="Supplier"&&e.jsx(k.div,{layoutId:"partnerFilterIndicator",className:"absolute inset-0 bg-[#f4c430] rounded-xl shadow-lg",transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx("span",{className:"relative z-10",children:"Nhà cung cấp"})]}),e.jsxs("button",{onClick:()=>{h("Both"),d(1)},className:g("relative px-5 py-2.5 rounded-xl text-xs font-black uppercase transition-all duration-200",N==="Both"?"text-white":"text-[#8b6f47] hover:bg-[#d4a574]/10"),children:[N==="Both"&&e.jsx(k.div,{layoutId:"partnerFilterIndicator",className:"absolute inset-0 bg-[#2d5016] rounded-xl shadow-lg",transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx("span",{className:"relative z-10",children:"Hợp tác X"})]})]})]}),e.jsx(k.div,{variants:pe,className:"bg-white/60 dark:bg-slate-900/60 backdrop-blur-md rounded-2xl border-2 border-[#d4a574]/30 overflow-hidden shadow-lg",children:e.jsx(L,{mode:"wait",children:e.jsxs(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#2d5016]/10 via-[#4a7c59]/8 to-[#2d5016]/10 border-b-2 border-[#d4a574]/40 transition-colors",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 w-10",children:e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded-md border-2 border-[#d4a574]/50 text-[#4a7c59] focus:ring-[#4a7c59] cursor-pointer",checked:I.length===j.length&&j.length>0,onChange:r})}),e.jsx("th",{onClick:()=>O("type"),className:"p-5 font-black text-[10px] uppercase tracking-widest text-[#2d5016] dark:text-[#d4a574] cursor-pointer hover:text-[#4a7c59] transition-colors group",children:e.jsxs("div",{className:"flex items-center",children:["Loại ",e.jsx(A,{field:"type"})]})}),e.jsx("th",{onClick:()=>O("name"),className:"p-5 font-black text-[10px] uppercase tracking-widest text-[#2d5016] dark:text-[#d4a574] cursor-pointer hover:text-[#4a7c59] transition-colors group",children:e.jsxs("div",{className:"flex items-center",children:["Tên & CCCD ",e.jsx(A,{field:"name"})]})}),e.jsx("th",{onClick:()=>O("phone"),className:"p-5 font-black text-[10px] uppercase tracking-widest text-[#2d5016] dark:text-[#d4a574] cursor-pointer hover:text-[#4a7c59] transition-colors group",children:e.jsxs("div",{className:"flex items-center",children:["Liên hệ ",e.jsx(A,{field:"phone"})]})}),e.jsx("th",{onClick:()=>O("debt_balance"),className:"p-5 font-black text-[10px] uppercase tracking-widest text-[#2d5016] dark:text-[#d4a574] text-right cursor-pointer hover:text-[#4a7c59] transition-colors group",children:e.jsxs("div",{className:"flex items-center justify-end",children:["Nợ ",e.jsx(A,{field:"debt_balance"})]})}),e.jsx("th",{className:"p-5 font-black text-[10px] uppercase tracking-widest text-[#2d5016] dark:text-[#d4a574] text-right",children:"Thao tác"})]})}),e.jsx("tbody",{className:"divide-y dark:divide-slate-800",children:e.jsx(L,{children:R?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-20 text-center text-gray-400 font-bold",children:"ĐANG TẢI..."})}):j.map((a,x)=>{const i=I.includes(a.id);return e.jsxs(k.tr,{initial:{opacity:0,x:-25},animate:{opacity:1,x:0},exit:{opacity:0,x:25},transition:{type:"spring",stiffness:90,damping:18,mass:.8,delay:Math.min(x*.02,.25)},className:g("hover:bg-[#d4a574]/5 dark:hover:bg-slate-800/50 transition-all duration-300 cursor-pointer border-b border-[#d4a574]/10",i?"bg-[#d4a574]/15 dark:bg-[#4a7c59]/15":""),style:{willChange:"opacity, transform"},onClick:_=>{_.target.tagName==="INPUT"||_.target.closest("button")||b(a)},onDoubleClick:_=>{_.preventDefault(),_.stopPropagation(),$(a)},children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded-md border-2 border-[#d4a574]/50 text-[#4a7c59] focus:ring-[#4a7c59] cursor-pointer",checked:i,onChange:()=>s(a.id)})}),e.jsx("td",{className:"p-5 uppercase text-[10px] font-black",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.is_customer&&e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-100 text-blue-700 shadow-sm",children:"Khách"}),a.is_supplier&&e.jsx("span",{className:"px-3 py-1 rounded-full bg-orange-100 text-orange-700 shadow-sm",children:"NCC"})]})}),e.jsxs("td",{className:"p-5 font-black uppercase text-sm dark:text-gray-100",children:[e.jsx("div",{children:a.name||"-"}),e.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center gap-1 font-bold mt-1 opacity-70",children:[e.jsx(ke,{size:12})," ",a.cccd||"Trống"]})]}),e.jsx("td",{className:"p-5 text-xs font-bold text-slate-600 dark:text-gray-400",children:a.phone||"-"}),e.jsx("td",{className:g("p-5 text-right font-black uppercase text-xs",a.debt_balance>0?"text-blue-700 dark:text-blue-400":a.debt_balance<0?"text-red-700 dark:text-red-400":"text-slate-400 dark:text-slate-600"),children:we(a.debt_balance)}),e.jsxs("td",{className:"p-4 text-right space-x-1",children:[a.is_customer&&e.jsx("button",{onClick:()=>ce(a),className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg",children:e.jsx(Le,{size:18})}),e.jsx("button",{onClick:()=>$(a),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg",children:e.jsx(Be,{size:18})}),e.jsx("button",{onClick:()=>xe(a.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:e.jsx(ge,{size:18})})]})]},a.id)})})})]}),!R&&j.length===0&&e.jsx("div",{className:"p-20 text-center text-gray-500 font-bold uppercase tracking-widest text-sm",children:"Không tìm thấy đối tác."}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-[#faf8f3]/50 to-[#f5f1e8]/50 dark:bg-[#2d5016]/5 border-t-2 border-[#d4a574]/20 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm font-bold text-[#8b6f47]",children:["Hiển thị ",e.jsxs("span",{className:"text-[#2d5016] dark:text-white",children:[(v-1)*V+1," - ",Math.min(v*V,W)]})," / ",e.jsx("span",{className:"text-[#2d5016] dark:text-white",children:W})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{disabled:v===1,onClick:()=>d(a=>Math.max(1,a-1)),className:"px-4 py-2 border-2 border-[#d4a574]/30 rounded-xl text-sm font-black uppercase tracking-widest disabled:opacity-30 hover:bg-[#d4a574]/10 transition-all text-[#2d5016] dark:text-white",children:"Trước"}),[...Array(Y)].map((a,x)=>{const i=x+1;return i===1||i===Y||i>=v-2&&i<=v+2?e.jsx("button",{onClick:()=>d(i),className:g("w-10 h-10 rounded-xl text-sm font-black transition-all",v===i?"bg-gradient-to-r from-[#2d5016] to-[#4a7c59] text-white shadow-lg shadow-[#2d5016]/30":"hover:bg-[#d4a574]/10 text-[#8b6f47] dark:text-[#d4a574]/60 border-2 border-[#d4a574]/30"),children:i},i):i===v-3||i===v+3?e.jsx("span",{className:"px-1 text-[#d4a574]",children:"..."},i):null}),e.jsx("button",{disabled:v===Y,onClick:()=>d(a=>Math.min(Y,a+1)),className:"px-4 py-2 border-2 border-[#d4a574]/30 rounded-xl text-sm font-black uppercase tracking-widest disabled:opacity-30 hover:bg-[#d4a574]/10 transition-all text-[#2d5016] dark:text-white",children:"Sau"})]})]})]},`${N}-${D}`)})}),e.jsx(_e,{isOpen:se,partner:U,onClose:()=>w(!1),onSave:Q}),e.jsx(L,{children:S&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b dark:border-slate-800 flex justify-between items-center bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black uppercase tracking-tighter text-primary",children:"Bảng giá sỉ riêng"}),e.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase",children:S.name})]}),e.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-gray-200 rounded-full",children:e.jsx(me,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6 space-y-4",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"text-[10px] font-black uppercase text-gray-400 tracking-widest",children:e.jsxs("tr",{children:[e.jsx("th",{className:"pb-4",children:"Tên sản phẩm"}),e.jsx("th",{className:"pb-4 text-right",children:"Giá mặc định"}),e.jsx("th",{className:"pb-4 text-right w-40",children:"Giá sỉ riêng"})]})}),e.jsx("tbody",{className:"divide-y dark:divide-slate-800",children:J.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 font-bold text-xs uppercase dark:text-gray-200",children:a.name}),e.jsx("td",{className:"py-3 text-right font-bold text-gray-400 text-xs",children:E(a.sale_price)}),e.jsx("td",{className:"py-3 text-right",children:e.jsx("input",{type:"text",className:"w-32 p-2 bg-gray-50 dark:bg-slate-800 border dark:border-slate-700 rounded text-right font-black text-blue-600 outline-none",value:E(ne[a.id]!==void 0?ne[a.id]:""),onBlur:x=>{const i=parseFloat(x.target.value.replace(/,/g,""));isNaN(i)||l(a.id,i)},onChange:x=>{const i=x.target.value.replace(/,/g,"");(!isNaN(parseFloat(i))||i==="")&&B(_=>({..._,[a.id]:i}))}})})]},a.id))})]})}),e.jsx("div",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>u(null),className:"px-6 py-2 bg-gray-900 text-white rounded-lg font-black uppercase text-xs",children:"Đóng"})})]})})}),e.jsx(L,{children:X&&e.jsx(He,{isOpen:!!X,partner:X,onClose:()=>b(null)})}),e.jsx(L,{children:z&&e.jsx(fe,{message:z.message,type:z.type,onClose:()=>f(null)})}),C&&e.jsx(ye,{isOpen:!!C,title:C.title,message:C.message,onConfirm:C.onConfirm,onCancel:()=>q(null),type:C.type}),e.jsx(Ce,{isVisible:R&&j.length===0,message:"Đang tìm đối tác..."})]})}export{tt as default};
