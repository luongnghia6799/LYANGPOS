import{a1 as be,r as n,j as e,a2 as O}from"./vendor-C23Namvk.js";import{a as N}from"./vendor-utils-C44aPrMG.js";import{B as F,D as fe,C as ve,a as je,L as ye,b as Ne,A as we,p as ke,c as Ce,d as Se}from"./vendor-charts-6q8tr750.js";import{f as _,a as U,L as ze,c as _e}from"./index-UsWd1F3S.js";import{T as Te}from"./Toast-DQljrx14.js";import{f as w,c as De,L as Le,W as G,b as q,k as Me,l as Ie,j as Ae,R as Re,A as We,m as W,d as Be,n as J,U as K,o as Pe,T as Z,p as Q,q as Ve,r as Ee,s as $e,t as He,u as Oe,v as Fe,Z as Ue,w as Ge,x as X,y as Y,z as qe,M as Je,B as Ke,E as Ze,F as Qe}from"./vendor-icons-B3K5gD8o.js";import{m as r,A as ee,u as Xe}from"./vendor-framer-DVZK1f_z.js";ve.register(je,ye,Ne,we,ke,Ce,Se);const Ye={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.02}}},c={hidden:{opacity:0,y:20,scale:.98,filter:"blur(4px)"},visible:{opacity:1,y:0,scale:1,filter:"blur(0px)",transition:{duration:.6,ease:[.22,1,.36,1]}}};n.memo(({title:m,value:s,icon:v,gradient:o,trend:x,subtitle:k,delay:D=0})=>{const b=Xe();return e.jsxs(r.div,{layout:"position",variants:c,whileHover:b?{}:{y:-6,scale:1.01,transition:{duration:.2}},className:"relative overflow-hidden glass-panel p-6 rounded-[2rem] shadow-lg border-2 border-primary/20 group h-full transition-shadow duration-300 hover:shadow-2xl",children:[e.jsx("div",{className:`absolute -top-10 -right-10 w-40 h-40 bg-gradient-to-br ${o} opacity-10 rounded-full blur-3xl group-hover:opacity-20 transition-opacity duration-700`}),e.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-4 rounded-2xl bg-gradient-to-br ${o} text-white shadow-xl group-hover:scale-110 group-hover:rotate-3 transition-all duration-500`,children:e.jsx(v,{size:28,strokeWidth:2.5})}),x&&e.jsxs(r.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},className:`px-3 py-1.5 rounded-full flex items-center gap-1.5 text-xs font-black ${x>0?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[x>0?e.jsx(W,{size:14}):e.jsx(Qe,{size:14}),Math.abs(x),"%"]})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-xs font-black text-[#8b6f47]/70 dark:text-gray-400 uppercase tracking-[0.15em] mb-2",children:m}),e.jsx("h3",{className:"text-3xl font-black text-[#2d5016] dark:text-white tracking-tight mb-1 group-hover:translate-x-1 transition-transform origin-left",children:s}),k&&e.jsx("p",{className:"text-xs font-bold text-[#8b6f47]/50 dark:text-gray-500 mt-1",children:k})]}),!b&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 pointer-events-none"})]})});const T=n.memo(({icon:m,label:s,value:v,color:o="emerald",onClick:x})=>e.jsxs(r.div,{layout:!0,variants:c,whileHover:{scale:1.05},onClick:x,className:_e("flex items-center gap-3 p-4 glass-panel rounded-2xl border border-primary/20 shadow-sm transition-all",x&&"cursor-pointer hover:border-primary/50 hover:bg-white/50"),children:[e.jsx("div",{className:`p-3 rounded-xl bg-${o}-100 dark:bg-${o}-900/30 text-${o}-600 dark:text-${o}-400`,children:e.jsx(m,{size:20,strokeWidth:2.5})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-black text-[#8b6f47]/60 dark:text-gray-400 uppercase tracking-wider",children:s}),e.jsx("p",{className:"text-lg font-black text-[#2d5016] dark:text-white",children:v})]})]}));function ot(){const m=be(),[s,v]=n.useState({revenue:0,profit:0,customer_debt:0,supplier_debt:0,customer_debt_list:[],supplier_debt_list:[],chart:{labels:[],data:[],profit_data:[]},expiry:{near:0,expired:0},low_stock:0}),[o,x]=n.useState(null),[k,D]=n.useState(!0),[b,te]=n.useState(new Date),[j,ae]=n.useState({year:new Date().getFullYear().toString(),month:(new Date().getMonth()+1).toString().padStart(2,"0"),day:new Date().getDate().toString().padStart(2,"0")}),[C,se]=n.useState({temp:28,desc:"Nắng nhẹ",icon:w,city:"Vụ mùa"}),[L,S]=n.useState(!1),[re,ie]=n.useState(localStorage.getItem("ui_show_dashboard_mascot")!=="false"),[h,B]=n.useState({x:0,y:0,scale:1.5}),[P,ne]=n.useState(localStorage.getItem("user_avatar")||""),[M,I]=n.useState(null),V=n.useRef(null);n.useEffect(()=>{const t=setInterval(()=>te(new Date),1e3);return()=>clearInterval(t)},[]),n.useEffect(()=>{const t=localStorage.getItem("mascot_config");if(t)try{B(JSON.parse(t))}catch(i){console.error("Error loading mascot config",i)}const a=()=>{ie(localStorage.getItem("ui_show_dashboard_mascot")!=="false")};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]);const E=t=>{const a={...h,...t};B(a),localStorage.setItem("mascot_config",JSON.stringify(a))},le=(t,a)=>{E({x:h.x+a.offset.x,y:h.y+a.offset.y})},z=async(t=null,a=null,i=null)=>{S(!0);try{let l=t,d=a,y=i;if(!l||!d){const H=localStorage.getItem("weather_location");if(H){const g=JSON.parse(H);l=g.latitude,d=g.longitude,y=g.city}else try{const g=await N.get("https://ipapi.co/json/");l=g.data.latitude,d=g.data.longitude,y=g.data.city}catch{l=21.0285,d=105.8542,y="Hà Nội"}}const pe=await N.get(`https://api.open-meteo.com/v1/forecast?latitude=${l}&longitude=${d}&current_weather=true`),{temperature:ue,weathercode:f}=pe.data.current_weather;let p="Nắng nhẹ",u=w;f===0?(p="Trời quang",u=w):f<=3?(p="Ít mây",u=Ge):f<=48?(p="Sương mù",u=X):f<=67?(p="Mưa nhẹ",u=Y):f<=82?(p="Mưa rào",u=Y):f<=99&&(p="Dông sét",u=qe),se({temp:Math.round(ue),desc:p,city:y||"Vụ mùa",icon:u}),l&&d&&localStorage.setItem("weather_location",JSON.stringify({latitude:l,longitude:d,city:y}))}catch(l){console.error("Weather fetch failed",l)}finally{S(!1)}},oe=()=>{if(!navigator.geolocation){I({message:"Trình duyệt của bạn không hỗ trợ GPS.",type:"error"});return}S(!0),navigator.geolocation.getCurrentPosition(async t=>{const{latitude:a,longitude:i}=t.coords;await z(a,i,"Vị trí của tôi")},t=>{I({message:"Không thể lấy vị trí. Vui lòng kiểm tra quyền truy cập vị trí.",type:"error"}),S(!1)},{enableHighAccuracy:!0})};n.useEffect(()=>{z();const t=setInterval(()=>z(),6e5);return()=>clearInterval(t)},[]);const A=(()=>{const t=b.getHours();return t<5?{text:"Chúc ngủ ngon",icon:Je,desc:"Nghỉ ngơi để ngày mai tràn đầy năng lượng"}:t<11?{text:"Chào buổi sáng",icon:Ke,desc:"Bắt đầu ngày mới với tinh thần phấn chấn"}:t<14?{text:"Chào buổi trưa",icon:w,desc:"Nghỉ ngơi để tiếp tục chinh phục mục tiêu"}:t<18?{text:"Chào buổi chiều",icon:X,desc:"Hoàn thiện công việc trong ngày hôm nay"}:{text:"Chào buổi tối",icon:Ze,desc:"Tổng kết và chuẩn bị cho ngày mai"}})(),ce=async t=>{const a=t.target.files[0];if(!a)return;const i=new FormData;i.append("file",a);try{const d=(await N.post("/api/upload-logo",i)).data.url;ne(d),localStorage.setItem("user_avatar",d)}catch(l){console.error("Avatar upload failed",l)}},de=async(t=!1)=>{t||D(!0);try{const a=new URLSearchParams(j),[i,l]=await Promise.all([N.get(`/api/dashboard-stats?${a.toString()}`),N.get("/api/ip")]);v(i.data),x(l.data)}catch(a){console.error("Failed to fetch dashboard stats",a)}finally{D(!1)}};n.useEffect(()=>{de()},[j]);const R=t=>{const{name:a,value:i}=t.target;ae(l=>({...l,[a]:i}))},xe={labels:s.chart?.labels||[],datasets:[{label:"Doanh thu",data:s.chart?.data||[],backgroundColor:t=>{const i=t.chart.ctx.createLinearGradient(0,0,0,400);return i.addColorStop(0,"#2d5016"),i.addColorStop(1,"#4a7c59"),i},borderRadius:12,barThickness:28,hoverBackgroundColor:"#d4a574"}]},he={labels:s.chart?.labels||[],datasets:[{label:"Lợi nhuận",data:s.chart?.profit_data||[],backgroundColor:t=>{const i=t.chart.ctx.createLinearGradient(0,0,0,400);return i.addColorStop(0,"#d4a574"),i.addColorStop(1,"#f4c430"),i},borderRadius:12,barThickness:28,hoverBackgroundColor:"#8b6f47"}]},me={labels:["Khách hàng nợ","Nợ nhà cung cấp"],datasets:[{data:[Math.abs(s.customer_debt),Math.abs(s.supplier_debt)],backgroundColor:["rgba(74, 124, 89, 0.8)","rgba(139, 111, 71, 0.8)"],borderColor:["#4a7c59","#8b6f47"],borderWidth:2}]},$=t=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:t,font:{size:14,weight:"bold",family:"'Be Vietnam Pro', sans-serif"},color:"#8b6f47",padding:{bottom:20}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(139, 111, 71, 0.08)",drawBorder:!1},ticks:{font:{family:"'Be Vietnam Pro', sans-serif"},color:"#8b6f47"}},x:{grid:{display:!1},ticks:{font:{family:"'Be Vietnam Pro', sans-serif"},color:"#8b6f47"}}},animation:{duration:800,easing:"easeOutQuart"}}),ge={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{family:"'Be Vietnam Pro', sans-serif",weight:"bold"},color:"#8b6f47",padding:15,usePointStyle:!0}}}};return e.jsxs(r.div,{layout:"position",initial:"hidden",animate:"visible",variants:Ye,className:"p-5 space-y-5 min-h-screen relative",children:[e.jsxs(r.div,{variants:c,className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs(r.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>V.current?.click(),className:"w-16 h-16 rounded-2xl border-3 border-primary/30 shadow-xl overflow-hidden cursor-pointer relative bg-gradient-to-br from-primary to-emerald-600",children:[P?e.jsx("img",{src:P,alt:"Avatar",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white",children:e.jsx(De,{size:28,strokeWidth:2.5})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(Le,{size:20,className:"text-white"})})]}),e.jsx("input",{type:"file",ref:V,onChange:ce,className:"hidden",accept:"image/*"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gradient-to-br from-[#f4c430] to-[#d4a574] rounded-full border-2 border-white flex items-center justify-center shadow-lg",children:e.jsx(w,{size:10,className:"text-white"})})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-black text-[#2d5016] dark:text-amber-400 tracking-tight mb-1 flex items-center gap-2",children:[e.jsx(A.icon,{size:28,className:"text-[#d4a574]"}),A.text]}),e.jsxs("p",{className:"text-sm text-[#8b6f47]/70 dark:text-amber-400/60 font-medium flex items-center gap-2",children:[e.jsx(G,{size:14,className:"text-[#d4a574]"}),A.desc]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex bg-white/60 dark:bg-slate-900/40 backdrop-blur-xl p-3 rounded-2xl border-2 border-[#d4a574]/20 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 text-[#2d5016] dark:text-amber-400 font-bold text-sm",children:[e.jsx(q,{size:16}),b.toLocaleDateString("vi-VN",{weekday:"short",day:"numeric",month:"short"})]}),e.jsx("div",{className:"w-px h-5 bg-[#d4a574]/30 mx-2 self-center"}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-gradient-to-r from-[#2d5016] to-[#4a7c59] text-white rounded-xl shadow-lg font-black text-base",children:[e.jsx(Me,{size:16}),b.toLocaleTimeString("vi-VN",{hour12:!1,hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 glass-panel border-2 border-primary/30 rounded-2xl shadow-sm",children:[e.jsx(C.icon,{size:18,className:"text-primary"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black uppercase text-muted leading-tight",children:C.city}),e.jsxs("span",{className:"text-sm font-black text-primary",children:[C.temp,"°C • ",C.desc]})]}),e.jsx("div",{className:"h-5 w-px bg-[#d4a574]/30 mx-1"}),e.jsx("button",{onClick:oe,disabled:L,className:"p-1.5 rounded-lg hover:bg-amber-200/50 text-[#8b6f47] transition-colors disabled:opacity-50",children:e.jsx(Ie,{size:14})}),e.jsx("button",{onClick:()=>z(),disabled:L,className:"p-1.5 rounded-lg hover:bg-amber-200/50 text-[#8b6f47] transition-colors disabled:opacity-50",children:L?e.jsx(Ae,{size:14,className:"animate-spin"}):e.jsx(Re,{size:14})})]})]})]}),e.jsxs(r.div,{variants:c,className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-white/60 dark:bg-slate-900/40 backdrop-blur-xl px-4 py-3 rounded-2xl border-2 border-[#d4a574]/20 shadow-sm",children:[e.jsx(q,{size:16,className:"text-[#4a7c59]"}),e.jsx("span",{className:"text-xs font-black uppercase text-[#8b6f47] tracking-wider",children:"Bộ lọc"}),e.jsxs("div",{className:"flex items-center gap-4 ml-2",children:[e.jsxs("select",{name:"day",value:j.day,onChange:R,className:"bg-transparent text-xs font-bold focus:outline-none text-[#2d5016] dark:text-white cursor-pointer",children:[e.jsx("option",{value:"",children:"Tất cả ngày"}),[...Array(31)].map((t,a)=>e.jsxs("option",{value:(a+1).toString().padStart(2,"0"),children:["Ngày ",a+1]},a+1))]}),e.jsx("div",{className:"w-px h-4 bg-[#d4a574]/30"}),e.jsxs("select",{name:"month",value:j.month,onChange:R,className:"bg-transparent text-xs font-bold focus:outline-none text-[#2d5016] dark:text-white cursor-pointer",children:[e.jsx("option",{value:"",children:"Tất cả tháng"}),[...Array(12)].map((t,a)=>e.jsxs("option",{value:(a+1).toString().padStart(2,"0"),children:["Tháng ",a+1]},a+1))]}),e.jsx("div",{className:"w-px h-4 bg-[#d4a574]/30"}),e.jsxs("select",{name:"year",value:j.year,onChange:R,className:"bg-transparent text-xs font-bold focus:outline-none text-[#2d5016] dark:text-white cursor-pointer",children:[e.jsx("option",{value:"",children:"Tất cả năm"}),[2024,2025,2026].map(t=>e.jsx("option",{value:t.toString(),children:t},t))]})]})]}),o&&e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-[#2d5016] to-[#4a7c59] text-white px-4 py-3 rounded-2xl shadow-lg",children:[e.jsx(We,{size:16}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] font-black uppercase opacity-80 leading-tight",children:"Truy cập mạng"}),e.jsxs("span",{className:"text-xs font-black",children:["http://",o.ip,":",o.port]})]})]})]}),e.jsxs(r.div,{variants:c,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(r.div,{whileHover:{y:-4,scale:1.02},className:"bg-gradient-to-br from-primary to-emerald-600 p-6 rounded-2xl shadow-lg border border-white/10 text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full -mr-8 -mt-8 group-hover:scale-150 transition-transform duration-700"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(G,{size:20,strokeWidth:2.5})}),e.jsx(W,{size:16,className:"opacity-60"})]}),e.jsx("p",{className:"text-xs font-black uppercase tracking-wider opacity-80 mb-1",children:"Doanh thu"}),e.jsx("h3",{className:"text-2xl font-black tracking-tight",children:_(s.revenue)})]})]}),e.jsxs(r.div,{whileHover:{y:-4,scale:1.02},className:"bg-gradient-to-br from-[#d4a574] to-[#f4c430] p-6 rounded-2xl shadow-lg border border-white/10 text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full -mr-8 -mt-8 group-hover:scale-150 transition-transform duration-700"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Be,{size:20,strokeWidth:2.5})}),e.jsx(J,{size:16,className:"opacity-60"})]}),e.jsx("p",{className:"text-xs font-black uppercase tracking-wider opacity-80 mb-1",children:"Lợi nhuận"}),e.jsx("h3",{className:"text-2xl font-black tracking-tight",children:_(s.profit)})]})]}),e.jsxs(r.div,{whileHover:{y:-4,scale:1.02},className:"bg-gradient-to-br from-[#4a7c59] to-[#87ceeb] p-6 rounded-2xl shadow-lg border border-white/10 text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full -mr-8 -mt-8 group-hover:scale-150 transition-transform duration-700"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(K,{size:20,strokeWidth:2.5})}),e.jsx(Pe,{size:16,className:"opacity-60"})]}),e.jsx("p",{className:"text-xs font-black uppercase tracking-wider opacity-80 mb-1",children:"Tổng phải thu"}),e.jsx("h3",{className:"text-2xl font-black tracking-tight",children:_(Math.abs(s.customer_debt))})]})]}),e.jsxs(r.div,{whileHover:{y:-4,scale:1.02},className:"bg-gradient-to-br from-[#8b6f47] to-[#6b4423] p-6 rounded-2xl shadow-lg border border-white/10 text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full -mr-8 -mt-8 group-hover:scale-150 transition-transform duration-700"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Z,{size:20,strokeWidth:2.5})}),e.jsx(Q,{size:16,className:"opacity-60"})]}),e.jsx("p",{className:"text-xs font-black uppercase tracking-wider opacity-80 mb-1",children:"Tổng phải trả"}),e.jsx("h3",{className:"text-2xl font-black tracking-tight",children:_(Math.abs(s.supplier_debt))})]})]})]}),e.jsxs(r.div,{variants:c,className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(T,{icon:Ve,label:"Sắp hết hạn",value:s.expiry?.near||0,color:"orange",onClick:()=>m("/products?filter=near_expiry")}),e.jsx(T,{icon:Ee,label:"Đã hết hạn",value:s.expiry?.expired||0,color:"red",onClick:()=>m("/products?filter=expired")}),e.jsx(T,{icon:$e,label:"Cần nhập hàng",value:s.low_stock||0,color:"amber",onClick:()=>m("/products?filter=warning")}),e.jsx(T,{icon:He,label:"Tỷ suất LN",value:s.revenue>0?`${(s.profit/s.revenue*100).toFixed(1)}%`:"0%",color:"emerald",onClick:()=>m("/products?filter=loss")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5",children:[e.jsxs(r.div,{layout:"position",variants:c,className:"lg:col-span-2 glass-panel p-6 rounded-3xl shadow-lg border-2 border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black text-[#2d5016] dark:text-white uppercase tracking-tight flex items-center gap-2",children:[e.jsx(Oe,{size:20,className:"text-[#4a7c59]"}),"Doanh thu 7 ngày"]}),e.jsx("p",{className:"text-xs text-[#8b6f47] font-medium mt-1",children:"Biểu đồ tổng quan"})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-[#2d5016] to-[#4a7c59] text-white rounded-xl",children:e.jsx(W,{size:18})})]}),e.jsx("div",{className:"h-[280px]",children:e.jsx(F,{options:$("Doanh thu (VNĐ)"),data:xe})})]}),e.jsxs(r.div,{layout:!0,variants:c,className:"glass-panel p-6 rounded-3xl shadow-lg border-2 border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black text-[#2d5016] dark:text-white uppercase tracking-tight flex items-center gap-2",children:[e.jsx(Fe,{size:20,className:"text-[#8b6f47]"}),"Phân bổ công nợ"]}),e.jsx("p",{className:"text-xs text-[#8b6f47] font-medium mt-1",children:"Tỷ lệ nợ"})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-[#8b6f47] to-[#6b4423] text-white rounded-xl",children:e.jsx(Q,{size:18})})]}),e.jsx("div",{className:"h-[280px] flex items-center justify-center",children:e.jsx(fe,{options:ge,data:me})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[e.jsxs(r.div,{layout:!0,variants:c,className:"glass-panel p-6 rounded-3xl shadow-lg border-2 border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-[#4a7c59] to-[#87ceeb] text-white rounded-xl",children:e.jsx(K,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-[#2d5016] dark:text-white uppercase tracking-tight",children:"Khách hàng còn nợ"}),e.jsx("p",{className:"text-xs text-[#8b6f47] font-medium",children:"Top 10 nợ cao nhất"})]})]}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto no-scrollbar",children:s.customer_debt_list?.length>0?s.customer_debt_list.slice(0,10).map((t,a)=>e.jsxs(r.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:a*.05},className:"flex items-center justify-between p-3 bg-gradient-to-r from-[#faf8f3] to-[#f5f1e8] dark:bg-slate-800/30 rounded-xl border border-transparent hover:border-[#d4a574]/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 rounded-lg bg-[#4a7c59]/10 flex items-center justify-center text-[#4a7c59] font-black text-xs",children:["#",a+1]}),e.jsx("span",{className:"font-bold text-[#2d5016] dark:text-gray-200 text-sm",children:t.name})]}),e.jsx("span",{className:"font-black text-[#4a7c59] dark:text-blue-400 text-xs",children:U(t.balance)})]},t.id)):e.jsx("p",{className:"text-center py-10 text-[#8b6f47]/50 font-bold italic text-sm",children:"Không có công nợ"})}),e.jsx(O,{to:"/partners",className:"block text-center text-xs font-black uppercase text-[#4a7c59] mt-4 hover:tracking-widest transition-all",children:"Xem tất cả →"})]}),e.jsxs(r.div,{layout:!0,variants:c,className:"glass-panel p-6 rounded-3xl shadow-lg border-2 border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-[#8b6f47] to-[#6b4423] text-white rounded-xl",children:e.jsx(Z,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-[#2d5016] dark:text-white uppercase tracking-tight",children:"Nợ nhà cung cấp"}),e.jsx("p",{className:"text-xs text-[#8b6f47] font-medium",children:"Cần thanh toán"})]})]}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto no-scrollbar",children:s.supplier_debt_list?.length>0?s.supplier_debt_list.slice(0,10).map((t,a)=>e.jsxs(r.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:a*.05},className:"flex items-center justify-between p-3 bg-gradient-to-r from-[#faf8f3] to-[#f5f1e8] dark:bg-slate-800/30 rounded-xl border border-transparent hover:border-[#d4a574]/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 rounded-lg bg-[#8b6f47]/10 flex items-center justify-center text-[#8b6f47] font-black text-xs",children:["#",a+1]}),e.jsx("span",{className:"font-bold text-[#2d5016] dark:text-gray-200 text-sm",children:t.name})]}),e.jsx("span",{className:"font-black text-[#8b6f47] dark:text-red-400 text-xs",children:U(t.balance)})]},t.id)):e.jsx("p",{className:"text-center py-10 text-[#8b6f47]/50 font-bold italic text-sm",children:"Chưa có nợ"})}),e.jsx(O,{to:"/partners",className:"block text-center text-xs font-black uppercase text-[#8b6f47] mt-4 hover:tracking-widest transition-all",children:"Quản lý công nợ →"})]})]}),e.jsxs(r.div,{variants:c,className:"bg-white/70 dark:bg-slate-900/50 backdrop-blur-xl p-6 rounded-3xl shadow-lg border-2 border-[#d4a574]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black text-[#2d5016] dark:text-white uppercase tracking-tight flex items-center gap-2",children:[e.jsx(Ue,{size:20,className:"text-[#d4a574]"}),"Lợi nhuận 7 ngày"]}),e.jsx("p",{className:"text-xs text-[#8b6f47] font-medium mt-1",children:"Xu hướng sinh lời"})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-[#d4a574] to-[#f4c430] text-white rounded-xl",children:e.jsx(J,{size:18})})]}),e.jsx("div",{className:"h-[280px]",children:e.jsx(F,{options:$("Lợi nhuận (VNĐ)"),data:he})})]}),e.jsx(ee,{children:M&&e.jsx(Te,{message:M.message,type:M.type,onClose:()=>I(null)})}),e.jsx(ee,{children:re&&e.jsxs(r.div,{drag:!0,dragMomentum:!1,onDragEnd:le,animate:{x:h.x,y:h.y},whileDrag:{cursor:"grabbing",scale:h.scale*1.05},className:"fixed z-[9999] cursor-grab group",style:{top:"20%",left:"80%",width:`${12*h.scale}rem`,height:`${12*h.scale}rem`},children:[e.jsx(r.img,{src:"/assets/images/user_mascot.png",alt:"Mascot",animate:{y:[0,-15,0],rotate:[-1,1,-1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-full h-full object-contain mix-blend-multiply dark:mix-blend-normal drop-shadow-2xl select-none",draggable:"false"}),e.jsxs("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md px-3 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-2 shadow-xl border border-[#d4a574]/20",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-[#8b6f47]",children:"Size"}),e.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:h.scale,onChange:t=>E({scale:parseFloat(t.target.value)}),className:"w-20 h-1 bg-[#d4a574]/30 rounded-lg appearance-none cursor-pointer accent-[#2d5016]"})]})]})}),e.jsx(ze,{isVisible:k&&!s.revenue,message:"Đang thu hoạch dữ liệu..."})]})}export{ot as default};
